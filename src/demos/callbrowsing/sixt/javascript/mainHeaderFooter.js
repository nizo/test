+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var s=i[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue())return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),p=o[0].offsetWidth,f=o[0].offsetHeight;if(c){var h=a,d=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+f>d.bottom?"top":"top"==a&&u.top-f<d.top?"bottom":"right"==a&&u.right+p>d.width?"left":"left"==a&&u.left-p<d.left?"right":a,o.removeClass(h).addClass(a)}var v=this.getCalculatedOffset(a,u,p,f);this.applyPlacement(v,a);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(n.TRANSITION_DURATION):g()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),a=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,c=r[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var p=/top|bottom/.test(n),f=p?2*u.left-i+l:2*u.top-o+c,h=p?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(f,r[0][h],p)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&o.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,o=e(this.$tip),s=e.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,s=r?{top:0,left:0}:o?null:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,l,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-o-s.scroll,l=t.top+o-s.scroll+r;a<s.top?i.top=s.top-a:l>s.top+s.height&&(i.top=s.top+s.height-l)}else{var c=t.left-o,u=t.left+o+n;c<s.left?i.left=s.left-c:u>s.right&&(i.left=s.left+s.width-u)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),define("bootstrap/tooltip",function(){}),function(e){define("bootstrap/popover",["bootstrap/tooltip"],function(){return function(){+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof t&&t;!i&&/destroy|hide/.test(t)||(i||r.data("bs.popover",i=new n(this,o)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.7",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery)}.apply(e,arguments)})}(this),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),o=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[s](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var o=t(i),s=o.data("bs.collapse"),a=s?"toggle":i.data();n.call(o,a)})}(jQuery),define("bootstrap/collapse",function(){}),function(e){"use strict";"function"==typeof define?define("leila/util/function",[],e):e()}(function(){"use strict";var e=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t=window||global,n={};n.construct=function(e,t){"function"!=typeof e&&(t=e||{},e=null);var r;return r=t.hasOwnProperty("constructor")&&"function"==typeof t.constructor?t.constructor:e?function(){e.apply(this,arguments)}:function(){},e?n.inherit(r,e,t):n.inherit(r,t)},n.inherit=function(t,n,r){var i;if("function"==typeof n){e(t,n);var o=function(){};o.prototype=n.prototype,t.prototype=new o,t.prototype.constructor=t,t.prototype.supr=n.prototype,t.supr=n}else r=n;return r&&"object"==typeof r&&("statics"in r&&(r=e({},r),i=r.statics,delete r.statics),e(t.prototype,r),i&&e(t,i)),t};var r=function(e,n,r,i){var o=function(){var s=arguments;e.$this=this,o.orig=e,o.inner=function(){e.apply(null==i?t:i,s)},o.timer=t["set"+n](o.inner,r),o.stop=function(){t["clear"+n](o.timer)}};return o};return n.delay=function(e,t,n){return r(e,"Timeout",t,n)},n.periodical=function(e,t,n){return r(e,"Interval",t,n)},t.leila=t.leila||{},(t.leila.util||(t.leila.util={})).fn=n,n}),function(e){"use strict";"function"==typeof define?define("leila/util/object",[],e):e()}(function(){"use strict";var $a=Array.prototype,$o=Object.prototype,root="object"==typeof window?window:global,isObj=function(e,t){return e&&("object"==typeof e||t&&"function"==typeof e)},isArr=function(e,t){return e&&(e instanceof Array||t&&"number"==typeof e.length&&e.length>-1)},uo={};uo.nsTest=function(e,t){var n=uo.nsTest.re.test(e);if(!n&&t)throw'invalid namespace "'+e+'", use a-z0-9 and $_';return n},uo.nsTest.re=/^[a-z$_][a-z0-9$_]*(\.[a-z$_][a-z0-9$_]*)*$/i,uo.ns=function(e,t,n){uo.nsTest(e,!0);for(var r,i=root,o=(e+"").split("."),s=o.length,a=2===arguments.length,l=0;l<s;l++){if(r=o[l],l===s-1){if(n)return r in i;a&&(i[r]=t)}if(!isObj(i[r],!0)){if(n)return!1;i[r]=null==i[r]?{}:new i[r].constructor(i[r])}i=i[r]}return i},uo.prop=function(e,t,n,r){for(var i,o=(t+"").split("."),s=o.length,a=e,l=3===arguments.length,c=!0===r,u=!1===r,p=0;i=o[p],null!=a;p++){if(p===s-1)return l?(a[i]=n,e):u?(delete a[i],!0):l?e:c?i in a:!!u||a[i];if(!isObj(a[i],!0)){if(!l)return!c&&!u&&void 0;a[i]=null==a[i]?{}:new a[i].constructor(a[i].valueOf())}a=a[i]}},uo.combine=function(e,t,n){if(!isArr(e,!0))return null;var r={},i=0,o=e.length;if(o&&isArr(t))for(o=Math.min(o,t.length);i<o;i++)r[e[i]]=t[i];else if(o&&e[0])for(n=n||uo.combine.fields;i<o;i++)r[e[i][n[0]]]=e[i][n[1]];return r},uo.combine.fields=[0,1],uo.values=function(e,t){var n=[];for(var r in e)(t||e.hasOwnProperty(r))&&n.push(e[r]);return n},uo.size=function(e,t){var n=0;if(isObj(e,!0))for(var r in e)n+=t||e.hasOwnProperty(r)?1:0;return n},uo.first=function(e,t){if(isObj(e,!0)){if(!t&&isArr(e,!0))return e[e.length-1];for(var n in e)if(t||e.hasOwnProperty(n))return e[n]}},uo.last=function(e,t){var n;if(isObj(e,!0)){if(!t&&isArr(e,!0))return e[e.length-1];for(var r in e)(t||e.hasOwnProperty(r))&&(n=e[r])}return n},uo.each=function(e,t,n){var r,i;if(n=n||e,isArr(e,!0))for(r=0,i=e.length;r<i&&!1!==t.call(n,r,e[r],e);r++);else if(e)for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,r,e[r],e))break;return e},uo.search=function(e,t,n,r){var i,o,s,a,l=$a.splice.call(arguments,0,arguments.length),c=l.length;if(2!==c){r=0===c%2&&!!$a.pop.call(l);for(i in e){for(o=1,a=!0;o<c&&a;o+=2)t=l[o],n=l[o+1],s=uo.prop(e[i],t),a=uo.isEqual(s,n);if(a)return r?i:e[i]}}else for(i in e)if(uo.isEqual(e[i],t))return i};var selectAdd=function(e,t,n,r,i){for(var o,s,a=1,l=!0;a<r&&l;a+=2)if(o=n[a],s=n[a+1],!uo.isEqual(uo.prop(t,o),s))return i;return null==e?(i||(i=[])).push(t):(i||(i={}))[e]=t,i};uo.select=function(e){var t,n,r=arguments,i=r.length,o=null;if(isArr(e))for(t=0,n=e.length;t<n;t++)o=selectAdd(null,e[t],r,i,o);else for(t in e)o=selectAdd(t,e[t],r,i,o);return o};var mg=function(e,t,n,r){if(e===t||!isObj(t)||isObj(t)&&!isObj(e))return t;var i=-1;!r&&isArr(e,!0)&&isArr(t,!0)&&(i=t.length,e.push.apply(e,t));for(var o in t)t.hasOwnProperty(o)&&(i<0||!/^\d+$/.test(o)||o>=i)&&(e[o]=n?mg(e[o],t[o],n,r):t[o]);return e};uo.merge=function(e){for(var t=arguments,n="boolean"==typeof t[0]&&$a.shift.call(t),r="boolean"==typeof t[0]&&$a.shift.call(t),i=1,o=t.length,e=t[0];i<o;i++)e=mg(e,t[i],n,r);return e},uo.clone=function(e){if(!e||"object"!=typeof e)return e;var t,n=e.constructor;if(n===Boolean||n===Number||n===String||n===Date)t=new n(e.valueOf());else if(n===Array)t=new n(e.length);else if(n===RegExp)t=new n(e.source,(e.global?"g":"")+(e.multiline?"m":"")+(e.ignoreCase?"i":""));else try{t=new n}catch(t){return e}for(var r in e)e.hasOwnProperty(r)&&(t[r]=uo.clone(e[r]));return t},uo.isEmpty=function(e,t){if(!e)return!0;var n=typeof e;if("object"!==n&&"function"!==n)return!1;for(var r in e)if(e.hasOwnProperty(r)&&(!t||!uo.isEmpty(e[r],!0)))return!1;return!0},uo.isArray=isArr;var eq=function(e,t,n){if(e===t)return 0!==e||1/e===1/t;var r=$o.toString.call(e);if(r!==$o.toString.call(t))return!1;if("[object String]"===r)return e+""==t+"";if("[object Number]"===r)return isNaN(e)&&isNaN(t)||e+0===t+0;if("[object Date]"===r||"[object Boolean]"===r)return+e===+t;if("[object RegExp]"===r)return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.ignoreCase===t.ignoreCase;if("object"!=typeof e||"object"!=typeof t||null===e||null===t||e.constructor!==t.constructor||uo.size(e)!==uo.size(t))return!1;for(var i=n.length-1;i>-1;i-=2)if(e===n[i-1]&&t===n[i])return!0;n.push(e,t);for(var i in e)if(e.hasOwnProperty(i)&&!(i in t&&eq(e[i],t[i],n)))return!1;return!0};uo.isEqual=function(e,t){return eq(e,t,[])};var reNotJSON=/[^,:{}\[\]\-+ \n\r\t]/,reCleanJSON=/"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\/(?:\\.|[^\/\\])*\/|(\b)(?:false|true|NaN|Infinity|undefined|null|-?\d+(?:\.\d+)?(?:e(\+|-)?\d+)?)(\b)/g,reCleanJSONObject=/\{\s*[\w_$]+\s*:/g;uo.isJSON=function(e){var t=e.replace(reCleanJSON,""),n=t.replace(reCleanJSONObject,"{:"),r=reNotJSON.test(n);return!r},uo.parseJSON=function(str){return uo.isJSON(str)?eval("("+str+")"):void 0};var reOption=/\s*(\S+?)\s*=\s*("[^"]*"|'[^']*'|\[[^\]]*\]|\{[^\}]*\}|\/[^\/]+\/[gis]{0,3}|(\S+?))(\s|$)/g;return uo.parseOptions=function(opts,evalExpressions){if("object"==typeof opts||!opts)return opts;for(var o,m;m=reOption.exec(opts);)(o||(o={}))[m[1]]=void 0===m[3]||evalExpressions?eval("("+m[2]+")"):m[2];return o},uo.ns("leila.util").object=uo,uo}),function(e){"use strict";"function"==typeof define?define("leila/util/string",[],e):e()}(function(){"use strict";var e=window||global,t={};t.str={chars:"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ",capitals:"ABCDEFGHIJKLMNOPQRSTUVWXYZÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞ",minuscules:"abcdefghijklmnopqrstuvwxyzàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿþß",natMap:{a:"àáâãåäæ",c:"ç",d:"ð",e:"èéêë",i:"ìíîï",o:"òóôõö",n:"ñ",s:"ßø",u:"ùúûü",y:"ýÿ",z:"Þ",A:"ÀÁÂÃÅÄÆ",C:"Ç",D:"Ð",E:"ÈÉÊË",I:"ÌÍÎÏ",O:"ÒÓÔÕÖ",N:"Ñ",S:"Ø",U:"ÙÚÛÜ",Y:"Ý",Z:"þ"}},t.numFormat=function(){var e=/^\s*(\-)?(\d+)?(?:\.(\d+))?\s*$/,n=function(r,i,o,s){var a=e.exec(r);if(!a||!a[2]&&!a[3])return"";var l=a[1]||"",c=a[2]||"0",u=a[3]||"",p=0;if(null!=i&&i!==u.length&&(u=i>u.length?t.pad(u,i,"0","r"):u.substr(0,i)),/^\d+$/.test(o)&&(p=o,o=s,s=arguments[4]),o=null!=o?o:n.dsep,s=null!=s?s:n.tsep,p&&(c=t.pad(c,p,"0","l")),s&&c){for(var f,h=c.length,d="";h>0;h-=3)f=h>2?c.substr(h-3,3):c.substr(0,h),d=f+(d?s:"")+d;c=d}return l+c+(""!==u?o+u:"")};return n.dsep=".",n.tsep="",n}();var n=t.str.natMap,r=[];for(var i in n)n.hasOwnProperty(i)&&r.push({char:i,re:new RegExp("["+n[i]+"]","g")});return t.unmutate=function(e){for(var t,n=r.length-1;-1<n;n--)t=r[n],e=e.replace(t.re,t.char);return e},t.ord=function(e,n){var r,i,o=e.substr(n||0,1);for(r in t.str.natMap)if(i=t.str.natMap[r].indexOf(o),i>=0)return r.charCodeAt(0)+i/10;return o.charCodeAt(0)},t.compare=function(e,n){e+="",n+="";for(var r,i=Math.min(e.length,n.length),o=0;o<i;o++)if(r=t.ord(e.charAt(o))-t.ord(n.charAt(o)))return r;return e.length-n.length},t.escapeStr=function(){var e="\\n\\r\\t\\v\\t\\v\\b\\f\\u2028\\u2029\\\\",t={"\n":"n","\r":"r","\t":"t","\v":"v","\b":"b","\f":"f","\u2028":"u2028","\u2029":"u2029"},n=new RegExp("["+e+'"]',"g"),r=function(e){return"\\"+(t[e]||e)};return function(t,i){var o=i&&'"'!==i?new RegExp("["+e+i+"]","g"):n;return(t+"").replace(o,r)}}(),t.escapeRe=function(){var e=/[\.\?\*\+\-\[\]\(\)\{\}\|\^\$\/\\]/g,t=function(e){return"\\"+e};return function(n){return(n+"").replace(e,t)}}(),t.escapeHtml=function(){var e=/[&<>"']/g,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},n=function(e){return t[e]};return function(t){return(t+"").replace(e,n)}}(),t.replace=function(e,n,r,i){r=null!=r?t.escapeRe(r):"",i=null!=i?t.escapeRe(i):"";var o="";for(var s in n)n.hasOwnProperty(s)&&(o+=(o?"|":"")+t.escapeRe(s));var a=(e+"").replace(new RegExp(r+"("+o+")"+i,"g"),function(e,t){return n[t]});return a},t.trim=function(){var e=/^(|l(eft)?.*)$/i,n=/^(|.*r(ight)?)$/i,r=/^\s+/,i=/\s+$/;return function(o,s,a){return s=s?"["+t.escapeRe(s)+"]+":"",a=a||"",e.test(a)&&(o=o.replace(s?new RegExp("^"+s):r,"")),n.test(a)&&(o=o.replace(s?new RegExp(s+"$"):i,"")),o}}(),t.trunc=t.truncate=function(e,t,n){return e+="",n=null==n?"...":""+n,e.length<=t?e:e.substr(0,t-n.length)+n},t.repeat=function(e,t){for(var n=0,r="";n<t;n++)r+=e;return r},t.pad=function(e,n,r,i){var o="number"==typeof e&&!isNaN(e)&&1/0!==Math.abs(e);e+="",r=null!=r?""+r:o?"0":" ",i=((i||(o?"l":"r"))+"").charAt(0);var s=Math.floor((n-e.length)/r.length);return r=t.repeat(r,s),"l"===i?r+e:e+r},t.camelSplit=function(e){var n=(e+"").split(t.camelSplit.expr);return n.length&&t.str.capitals.indexOf(n[0].charAt(0))>-1&&n.unshift(""),n},t.camelSplit.expr=new RegExp("(?=["+t.str.capitals+"])"),t.ucfirst=function(e){return e=null!=e?e+"":"",e.length?e.substr(0,1).toUpperCase()+e.substr(1):e},t.lcfirst=function(e){return e=null!=e?e+"":"",e.length?e.substr(0,1).toLowerCase()+e.substr(1):e},t.cam=t.camelize=function(e){return e=(null==e?"":e+"").replace(/[\-\_]+(.+?)?/g,function(e,n,r){return null!=n?t[r?"ucfirst":"lcfirst"](n):""})},t.dash=t.dasherize=function(e,n){return(null==n?t.camelSplit(e):(e+"").split(n)).join("-").toLowerCase()},t.underscore=function(e,n){return(null==n?t.camelSplit(e):(e+"").split(n)).join("_").toLowerCase()},e.leila=e.leila||{},(e.leila.util||(e.leila.util={})).string=t,t}),function(e){"use strict";"function"==typeof define?define("leila/util/date",[],e):e()}(function(){"use strict";function e(e,t){for(var n=t-1,r="";-1<n;n--)r+=e;return r}var t=window||global,n={};n.dateMs={sec:1e3,min:6e4,hour:36e5,day:864e5,week:6048e5,year:315576e5};for(var r in n.dateMs)n.dateMs["min"===r?"i":r.charAt(0)]=n.dateMs[r];n.dateNames={month:"Januar,Februar,März,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember".split(","),monthShort:"Jan,Feb,Mär,Apr,Mai,Jun,Jul,Aug,Sep,Okt,Nov,Dez".split(","),weekDay:"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag".split(","),weekDayShort:"So,Mo,Di,Mi,Do,Fr,Sa".split(","),relativeDay:{"-2":"vorgestern","-1":"gestern",0:"heute",1:"morgen",2:"übermorgen"}};var i={u:"Time",y:"FullYear",m:"Month",d:"Date",o:"DayOfYear",w:"Day",h:"Hours",i:"Minutes",s:"Seconds",x:"Milliseconds",year:"FullYear",month:"Month",day:"Date",hour:"Hours",min:"Minutes",sec:"Seconds"},o=0;return n.dateNormalize=function(e){return e instanceof Date?(e.setTime(e.getTime()+o),e):(null!=e&&(o=(new Date).getTime()-e),o)},n.dateCreate=function(e,t){if(""===e||null==e)return n.dateNormalize(new Date);if(e instanceof Date)return e;if(/^\d+(\.\d+)?$/.test(""+e))return new Date(parseFloat(e));if(n.dateCalc.expr.test(e+""))return n.dateCalc(n.dateNormalize(new Date),e);var r=n.dateCreate,i=r.expr.exec(""+e);if(!i||!r.pos[i[2]])return null;for(var o,s=r.pos[i[2]],a={},l=0;l<2;l++){for(o in s)a[o]=/^\d+$/.test(i[s[o]])?i[s[o]]-0:NaN;s=r.pos.time}(isNaN(a.y)||a.y>=0&&a.y<100)&&(t=t?parseInt(t,10):n.dateNormalize(new Date).getFullYear(),a.y=isNaN(a.y)?t:100*Math.floor(t/100)+a.y),r.lim.d[1]=n.getDaysOfMonth(a.m-1,a.y);for(l in r.lim)if(!isNaN(a[l])&&(a[l]<r.lim[l][0]||a[l]>r.lim[l][1]))return null;return new Date(a.y,isNaN(a.m)?0:a.m-1,isNaN(a.d)?1:a.d,isNaN(a.h)?0:a.h,isNaN(a.i)?0:a.i,isNaN(a.s)?0:a.s)},n.dateCreate.expr=new RegExp("(\\d{1,4})\\s*(\\D)\\s*(\\d{1,2})(?:\\s*\\2\\s*(\\d{1,4}))?(?:\\s+(\\d{1,2}):(\\d{1,2})(?::(\\d{1,2}))?)?/"),n.dateCreate.expr=/(\d{1,4})\s*(\D)\s*(\d{1,2})(?:\s*\2\s*(\d{1,4}))?(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?/,n.dateCreate.pos={".":{d:1,m:3,y:4},"/":{d:3,m:1,y:4},"-":{d:4,m:3,y:1},time:{h:5,i:6,s:7}},n.dateCreate.lim={m:[1,12],d:[1,31],h:[0,23],i:[0,59],s:[0,59]},n.dateCalc=function(e,t){if(!(e=n.dateCreate(e)))return null;for(var r,o,s,a,l,c=new Date(e.getTime());r=n.dateCalc.expr.exec(t);)o=("-"===r[1]?-1:1)*parseInt(r[2],10),s=r[3].toLowerCase(),"week"===s?(l=c.getHours(),c.setHours(12),c.setTime(c.getTime()+o*n.dateMs[s]),c.setHours(l)):s in i&&(a=i[s],c["set"+a](c["get"+a]()+o));return c},n.dateCalc.expr=/\s*([\-\+])?\s*(\d*)\s*(sec|min|hour|day|week|month|year)[a-z]*/gi,n.getAge=function(e,t){e=n.dateCreate(e),t=n.dateCreate(t);var r=e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()?t.getFullYear()-e.getFullYear():(t.getTime()-e.getTime())/n.dateMs.year;return r},n.isLeapYear=function(e){return!(e%4||0===e%100&&e%400)},n.getDaysOfMonth=function(e,t){if(null==t){var r=new Date;t=r.getFullYear(),e=null!=e?e:r.getMonth()}return 1===e-0&&n.isLeapYear(t)?29:n.getDaysOfMonth.index[e]},n.getDaysOfMonth.index=[31,28,31,30,31,30,31,31,30,31,30,31],n.dateComponent=function(e,t){var r,o=t.charAt(0),s=o.toLowerCase(),a=t.length;if("o"===s){var l=new Date(e.getFullYear(),0,1);r=Math.ceil((e.getTime()-l.getTime())/n.dateMs.day),r=1<a?("00"+r).substr(-3):r}else if("c"===s){var l=new Date(e.getFullYear(),0,1),c=l.getDay()||7;if(l.setDate(9-c),r=Math.ceil((e.getTime()-l.getTime())/n.dateMs.week)+(c>4?0:1),!r){var u=new Date(e.getFullYear()-1,0,1);r=5===c||6===c&&4===u.getDay()?53:52}r=1<a?("0"+r).substr(-2):r}else if("r"===s||"R"===s){var p,f,c=new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0),h=n.dateCreate();h.setHours(12),h.setMinutes(0),h.setSeconds(0),p=c.getTime()/n.dateMs.day-h.getTime()/n.dateMs.day,f=(p<0?-1:1)*Math.round(Math.abs(p)),r=n.dateNames.relativeDay[f]||""}else if(s in i)if(r=e["get"+i[s]](),"y"===s)r=1<a?("000"+r).substr(-4):("0"+r%100).substr(-2);else if(s===o)"m"===s?r++:"w"===s&&(r=r||7),r=2===a?("0"+r).substr(-2):r;else{var d=("w"===s?"weekDay":"month")+(2===a?"":"Short");r=n.dateNames[d][r]}return r+""},n.dateFormat=function(t,r,i){if(null==(t=n.dateCreate(t)))return"";var o,s;return i?(s=t.getTime(),o=r.replace(n.dateFormat.expr.duration,function(t){var r=t.charAt(0),i=n.dateMs[r],o=t.length,a=Math.floor(s/i),l=a+"";return s-=a*i,e("0",o-l.length)+l})):o=r.replace(n.dateFormat.expr.time,function(e){if(e.indexOf("RR")>-1){var r=n.dateComponent(t,"R");return r?e.replace("RR",r):""}return n.dateComponent(t,e)}),o},n.dateFormat.expr={time:/(@|u|x|s{1,2}|i{1,2}|h{1,2}|d{1,2}|D{1,2}|o{1,2}|w|W{1,2}|(?:,\s*)?RR(?:,\s*)?|R|m{1,2}|M{1,2}|y{1,2}|c{1,2}|C{1,2})/g,duration:/\b(w+|d+|h+|i+|s+)\b/g},t.leila=t.leila||{},t.leila.util=t.leila.util||{},t.leila.util.date=n,n}),function(e){"use strict";return"function"==typeof define&&define.amd?define("leila/util/view",[],e):e()}(function(e){"use strict";var t=window||global,n=function(e){return e.charAt(0).toLowerCase()+e.substr(1)},r=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},i=/[A-Z]/g,o=function(e){return"-"+e.toLowerCase()},s=function(e){return(e?e+"":"").replace(i,o)},a=/[&<>"]/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},c=function(e){return l[e]},u=function(e){return(e+"").replace(a,c)},p={};t.leila=t.leila||{},t.leila.util=t.leila.util||{},t.leila.util.view=p,p.htmlElement=function(e,t,n){var r=p.htmlElement.getAttribString(t," ");return"<"+e+r+(n?">"+n+"</"+e+">":"/>")},p.htmlElement.getAttribString=function(e,t){var n,r,i="";for(n in e)e.hasOwnProperty(n)&&null!=e[n]&&!1!==e[n]&&(r=e[n],n=u(s(n)),i+=(i?" ":"")+n+'="'+(!0===r?n:u(r))+'"');return t&&i?t+i:i};var f=function(e,t,n,r){var i=null,o=!n;if("function"==typeof r?(i=r,r={}):r||(r={}),e&&t){var s,a,l=t instanceof Function?t:t instanceof Array?function(e,n){return-1<t.indexOf(n)}:t instanceof RegExp?function(e,n){return t.test(n)}:t instanceof Object?function(e,n){return!!t[n]}:null;for(s in e)a=e.hasOwnProperty(s)&&null!=e[s]?e[s]:"",""!==a&&o===Boolean(l(a,s))&&(r[s]=a,i&&i(a,s))}return r};p.img=function(e,t,n){return t instanceof Object?n=t:n||(n={}),n.src=e,n.alt=t&&"string"==typeof t?t:n.alt||"",p.htmlElement("img",n)};var h=function(e,t,n){return n=n||{},null!=t&&(n.name=t),null!=e&&(n.type=e),!0===n.id&&(n.id=d(n.name)),n},d=function(e){return null==e||!1===e?"":e.replace(/\]?\[?\]$/,"").replace(/[\[\]]+/g,"-")};p.formElement=function(e,t,n){var i="form"+r(e),o=p[i]?p[i](t,n):p.formInput(e,t,n);return o},p.formInput=function(e,t,n){return p.htmlElement("input",h(e,t,n))},p.formText=function(e,t){return p.formInput("text",e,t)},p.formRadio=function(e,t){return p.formInput("radio",e,t)},p.formCheckbox=function(e,t){return p.formInput("checkbox",e,t)},p.formHidden=function(e,t){return p.formInput("hidden",e,t)};var v=/\{\{(key|item(\..+?)?)\}\}/g,g=function(e,t,n){var r;return r=v.test(n)?n.replace(v,function(n,r,i){return"key"===r?e:i?m(t,i.substr(1)):t}):"number"==typeof n?t[n]:m(t,n+""),null!=r&&!1!==r?r:""},m=function(e,t){for(var n=t.split("."),r=0,i=n.length,o=e;r<i&&null!=o;r++)o=o[n[r]];return null==o?"":o},y=[0,1],b=function(e,t){if(!1==e instanceof Object)return[];t=t&&"object"==typeof t?t:t?[t,t]:y;var n=[];if(e instanceof Array)for(var r,i,o=0,s=e.length;o<s;o++)r=e[o],i=g(o,r,t[1]),n.push(i instanceof Array?[r,p.formSelect.buildOptionsArray(i,t)]:r&&"object"==typeof r?[r[t[0]],i]:[r,r]);else for(var r in e)e.hasOwnProperty(r)&&n.push(r,e[r]);
return n},w=function(e,t,r){r=r||{};var i,o,s,a=r.options||[],l=r.fields||y,c=r.listsep||"",u=null!=r.value?r.value:"",p="",h={name:t,id:r.id,align:r.align||"left",valueKeys:!!r.valueKeys,input:{type:e},label:{}},d=/^(label|input)(.+)$/i;for(var v in r)(i=d.exec(v))&&(h[i[1]][n(i[2])]=r[v]);if(r=f(r,/^options|align|listsep|label|fields$/,!0),a instanceof Array)for(var v=0;v<a.length;v++)s=a[v],o=s&&"object"==typeof s?_(s[l[0]],g(v,s,l[1]),u,h):_(s,s,u,h),p+=(p?c:"")+o;else for(s in a)a.hasOwnProperty(s)&&(p+=(p?c:"")+_(s,a[s],u,h));return p},_=function(e,t,n,r){var i=$.extend({},r.input),o=$.extend({},r.label),s=r.sep||"";r.valueKeys?(i.name=r.name+"["+e+"]",i.value=1,i.checked=n instanceof Object?!!n[e]:T(e,n)):(i.name=r.name+("radio"===i.type?"":"[]"),i.value=e,i.checked=n instanceof Array?-1<n.indexOf(e):T(e,n)),r.id&&(i.id=o.for=d(i.name+(r.valueKeys?"":"-"+e)));var a=p.htmlElement("input",i);return p.htmlElement("label",o,"left"===r.align?a+s+t:t+s+a)};p.formMultiRadio=function(e,t){return w("radio",e,t)},p.formMultiCheckbox=function(e,t){return w("checkbox",e,t)},p.formSelect=function(e,t){var n=t?p.formSelect.buildOptions(t.options,t.value,t.fields):"",t=f(t,/^options|value|fields$/i,!0);return"[]"===e.substr(-2)&&(t.multiple=!0),p.htmlElement("select",h(null,e,t),n)},p.formSelect.buildOptions=function(e,t,n){if(!1==e instanceof Object)return"";n=n&&"object"==typeof n?n:n?[n,n]:y;var r="";if(e instanceof Array)for(var i,o,s=0,a=e.length;s<a;s++)i=e[s],o=i&&"object"==typeof i?x(i[n[0]],g(s,i,n[1]),t,n):x(i,i,t,n),r+=(r?"\n":"")+o;else for(var i in e)e.hasOwnProperty(i)&&(r+=(r?"\n":"")+x(i,e[i],t,n));return r};var x=function(t,n,r,i){return n instanceof Object?p.htmlElement("optgroup",{label:t},p.formSelect.buildOptions(n,r,i)):p.htmlElement("option",{value:t,selected:!!T(t,r)||e},n)},O=function(e){return null==e||!1===e?"":!0===e?"1":""+e},T=function(e,t){return O(e)===O(t)};return p.formMultiCheckbox.buildOptionsArray=p.formMultiRadio.buildOptionsArray=p.formSelect.buildOptionsArray=b,p.formMultiCheckbox.readLabel=p.formMultiRadio.readLabel=p.formSelect.readLabel=g,p}),function(e){"use strict";"function"==typeof define?define("leila/util/template",[],e):e()}(function(){"use strict";var e=window||global,t="\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029",n={"\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},r=/[&<>"']/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},o=function(e){return i[e]},s=function(e){return(e+"").replace(r,o)},a={pattern:"<%([-~:=])?([\\s\\S]+?)%>",escape:"-",json:"~",jsonEscape:":",interpolate:"=",data:"data",variable:"__p__"},l=function(e,r,i){if("string"==typeof i&&(i={data:i}),i)for(var o in a)a.hasOwnProperty(o)&&!i[o]&&(i[o]=a[o]);else i=a;var s=new RegExp(i.pattern+"|"+t,"g"),l=function(e,t,r){switch(t){case i.escape:return"'+\nleila.util.template.escape("+r+")+\n'";case i.json:return"'+\nJSON.stringify("+r+")+\n'";case i.jsonEscape:return"'+\nleila.util.template.escape(JSON.stringify("+r+"))+\n'";case i.interpolate:return"'+\n("+r+")+\n'"}return r?"';\n"+r+"\n;"+i.variable+"+='":"\\"+(n[e]||e)},c="var "+i.variable+"='',print=function(){"+i.variable+"+=Array.prototype.join.call(arguments, '')};\nwith("+i.data+" || true){\n"+i.variable+"+='"+e.replace(s,l)+"';\n}\nreturn "+i.variable+";\n",u=new Function(i.data,c);return u.source=c,null==r?u:u(r)};return l.options=a,l.escape=s,e.leila=e.leila||{},(e.leila.util||(e.leila.util={})).template=l,l}),function(e,t,n){"use strict";define("leila/leila",["./util/function","./util/object","./util/string","./util/date","./util/view","./util/template"],function(r,i,o,s,a,l){var c=function(e){return e instanceof c?c:!1==this instanceof c?new c(e):void this.push.apply(this,arguments)};c.prototype=c.fn=[],c.fn.constructor=c,c.fn.get=function(e){return this[void 0==e?0:e]},c.fn.set=function(e,t){return 2>arguments.length&&(t=e,e=0),this[e]=t,this};var u=function(e,t){"function"==typeof t&&(c[e]=t,c.fn[e]=function(){var e=[null];e.push.apply(e,arguments);for(var n=this.length-1;n>-1;n--)e[0]=this[n],this[n]=t.apply(c,e);return this})};c.mixin=function(e){for(var t=0,n=arguments.length;t<n;t++)i.each(arguments[t],u);return c},c.noConflict=function(){return e.ll=t,e._=n,c};var p;c.fly=function(e){return p=new c,c.fly=function(e){return p.set.apply(p,arguments)},c.fly.apply(c,arguments)};var f;return c.jq=function(e){return f=new jQuery(!0),c.jq=function(e){return f[0]=e,f},c.jq(e)},c.util={fn:r,object:i,string:o,date:s,view:a,template:l},c.mixin(r,i,o,s,a,{template:l}),e.leila=e.ll=e._=c,c})}(this,this.ll,this._),function(e){"use strict";return"function"==typeof define?define("leila/abstract/observable",[],e):e()}(function(e){"use strict";var t=Array.prototype,n=function(e){return t.unshift.apply(e,t.slice.call(arguments,1)),e},r=function(e,t){if(this.target=e,t)for(var n in t)t.hasOwnProperty(n)&&(o.initMethods[n]?this[n](t[n]):this[n]=t[n])},i=r.prototype={listeners:null,__state__:"pending",constructor:r,resolve:function(){return this.__state__="resolved",i.trigger.apply(this,n(arguments,"done"))},reject:function(){return this.__state__="rejected",i.trigger.apply(this,n(arguments,"fail"))},state:function(){return this.__state__},then:function(e,t,n){return e&&this.done(e),t&&this.fail(t),n&&this.progress(n),this},done:function(){return"resolved"===this.state()?o.callFn.call(this,arguments):o.on.apply(this,n(arguments,"done")),this},fail:function(){return"rejected"===this.state()?o.callFn.call(this,arguments):o.on.apply(this,n(arguments,"fail")),this},progress:function(){return o.on.apply(this,n(arguments,"progress"))},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},promise:function(){return this}},o={initMethods:{done:!0,fail:!0,progress:!0,always:!0},getListeners:function(e){return this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e]},on:function(e){for(var t,n=1,r=arguments,i=r.length;n<i;n++)"function"==typeof r[n]&&(t=t||o.getListeners.call(this,e),0>t.indexOf(r[n])&&t.push(r[n]));return this},trigger:function(e){var n=this.listeners?this.listeners[e]:null;if(n)for(var r=0,i=n.length,o=t.slice.call(arguments,1);r<i;r++)n[r].apply(this.target,o)},callFn:function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].apply(this.target,t)}},s=function(e,t){r.call(this,e,t)},a=s.prototype={type:"[unknown Event]",ns:"",target:null,propagationStopped:!1,defaultPrevented:!1,wait:null,constructor:s,toString:function(){return this.type+(this.ns?":"+this.ns:"")+(this.propagationStopped?" [propagationStopped]":"")+(this.defaultPrevented?" [defaultPrevented]":"")+(this.target?" "+this.target:"")},stopPropagation:function(){return this.propagationStopped=!0,this},isPropagationStopped:function(){return this.propagationStopped},preventDefault:function(){return this.defaultPrevented=!0,this},isDefaultPrevented:function(){return this.defaultPrevented},waitFor:function(e){return(this.wait||(this.wait={}))[e]=!0,this},isPending:function(){if(this.wait)for(var e in this.wait)if(this.wait.hasOwnProperty(e))return!0;return!1},resolve:function(e){return this.wait&&this.wait[e]&&(delete this.wait[e],o.trigger.apply(this,["progress",e].concat(t.slice.call(arguments,1)))),this.isPending()||this.isDefaultPrevented()||o.trigger.apply(this,["done"].concat(this.result)),this},resolveWith:function(e){if("result"in this)throw"only ONE result may be used to resolve event-wait-state";return this.result=t.slice.call(arguments,1),this.resolve(e)},reject:function(){return this.wait=null,this.preventDefault(),t.unshift.call(arguments,"fail"),this.trigger.apply(this,arguments),this}};for(var l in i)i.hasOwnProperty(l)&&!a.hasOwnProperty(l)&&(a[l]=i[l]);var c=function(e){return p.is(this)?(this.listeners&&p.cloneListeners.call(this),void(e&&"function"!=typeof this.setOptions&&(e.listenTo&&this.listenTo(e.listenTo),e.listeners&&this.on(e.listeners)))):p.make.apply(p,arguments)},u={__observable__:c,listenTo:function(e,t){if(e instanceof Object){for(var n in e)e.hasOwnProperty(n)&&this.listenTo(n,!!e[n]);return this}var r=arguments,i=r.length;t="boolean"!=typeof r[i-1]||Array.prototype.pop.call(r),r=r[0]instanceof Array?r[0]:r,t&&!this.listeners&&(this.listeners={});for(var o,s=0;s<i;s++)e=r[s],o=this.listeners&&this.listeners[e],t&&!o?this.listeners[e]=[]:!t&&o&&delete this.listeners[e];return this},listen:function(e){return e=!1!==e&&"off"!==e,(e||this.listeners)&&(this.listeners=this.listeners||{},this.listeners.__enabled__=e),this},hasListeners:function(e){var t=this.listeners?this.listeners[e]||null:null;if(!t)return 0;if(e)return t.length;var n=0;for(var r in t)n+=t.hasOwnProperty(r)&&"__"!==r.substr(0,2)?1:0;return n},on:function(e,t,n,r){return p.onOff.call(this,"on",e,t,n,r),this},one:function(e,t,n,r){return p.onOff.call(this,"on",e,t,n,r,!0),this},off:function(e,t,n,r){return p.onOff.call(this,"off",e,t,n,r),this},trigger:function(e,n){var r,i,o,a=e&&"object"==typeof e?e:{type:e},l=p.getType(a.type),c=l.type.length,u=this.listeners?this.listeners[l.type]||null:null,f=this.__suppressTrigger__,h=(u&&this.listeners.__enabled__?u.length:0)-1;if(f&&f[a.type])return f[a.type]--,null;if(f&&f.__all__)return f.__all__--,null;a=$.extend(a,l,{triggerNs:l.ns}),"args"in a?(o=a.args,o=[null].concat("object"==typeof o&&-1<o.length?t.slice.call(o,0):[o])):o=arguments;for(;-1<h&&(!r||!r.isPropagationStopped());h--)i=u[h],i?(""===i.ns||l.ns===i.ns||l.all&&l.ns+"."===i.ns.substr(0,c+1))&&(r||(r=o[0]=new s(this,a)),r.data=i.data,r.ns=i.ns.length>l.ns.length?i.ns:l.ns,!1===i.fn.apply(i.context,o)&&r.stopPropagation().preventDefault(),i.once&&u.splice(h,1)):window.console.warn("empty event-listener:",a.type,l,n,i);return r?r.resolve():(a&&("function"==typeof a.done&&a.done.call(this),"function"==typeof a.always&&a.always.call(this)),null)},suppressTrigger:function(e,t){return 1===arguments.length&&(t=e,e="__all__"),t-=0,e&&t&&((this.__suppressTrigger__||(this.__suppressTrigger__={}))[e]=t),this}},p={is:function(e){return e&&(e instanceof c||e.__observable__===c)},cloneListeners:function(){var e,t,n,r,i={};for(e in this.listeners)if(t=this.listeners[e],this.listeners.hasOwnProperty(e)&&t){if("_"===e.charAt(0)){i[e]=!!t;continue}for(n=i[e]=[],"function"==typeof t?n.push(t):t&&t.length&&n.push.apply(n,t),r=n.length-1;r>=0;r--)"function"==typeof n[r]?n[r]={fn:n[r],context:this,ns:"",data:void 0,once:!1}:n[r]&&"object"==typeof n[r]&&n[r].fn||n.splice(r,1)}this.listeners=i},getType:function(e){var t=/^(.+?)(:([^\*]*?))?(:\*)?$/.exec(e);if(t&&t[2]&&""===t[3])throw'invalid event-type namespace "'+e+'"';return t?{type:t[1],ns:t[2]?t[3]:"",all:!!t[4]}:null},find:function(e,t,n,r){for(var i,o="object"==typeof e?e:p.getType(e),s=this.listeners?this.listeners[o.type]||null:null,a=(s?s.length:0)-1;a>=0&&(i=s[a],i.ns!==o.ns||null!=t&&i.fn!==t||null!=n&&i.context!==n||null!=r&&i.data!==r);a--);return a},onOff:function(e,t,n,r,i,o){if(!t||"object"!=typeof t)return p[e].call(this,t,n,r,i,o);null==r&&(r=t.context),null==i&&(i=t.data),null==o&&(o=t.once);var s=/^(context|data|once)$/;for(var a in t)t.hasOwnProperty(a)&&!s.test(a)&&p[e].call(this,a,t[a],r,i,o)},on:function(e,t,n,r,i){n=null==n?this:n;for(var o,s,a=(""+e).split(/\s+/),l=0,c=a.length;l<c;l++)o=arguments[0]=p.getType(a[l]),s=this.listeners?this.listeners[o.type]||null:null,s&&0>p.find.apply(this,arguments)&&s.push({fn:t,ns:o.ns,context:n,data:r,once:!!i})},off:function(e,t,n){for(var r,i=(""+e).split(/\s+/),o=0,s=i.length;o<s;o++)if(r=arguments[0]=p.getType(i[o]),null==t&&null==n&&null==r.ns)this.listeners[r.type]&&(this.listeners[r.type]=[]);else for(var a;-1<(a=p.find.apply(this,arguments));)this.listeners[r.type].splice(a,1)},make:function(e,t){for(var n in u)try{u.hasOwnProperty(n)&&"constructor"!==n&&(e[n]=u[n])}catch(e){throw e}return c.call(e,t)}};u.addListenTo=u.listenTo,u.addListeners=u.on,u.removeListeners=u.off,p.make(c.prototype),c.Event=s,c.merge=function(e,t){if(e=e||{},t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var f=window||e||{};return f.leila=f.leila||{},(f.leila.abstract||(f.leila.abstract={})).Observable=c,c}),define("leila/model",["./leila","./abstract/observable"],function(e,t){"use strict";var n=Array.prototype,r={filters:{string:function(e){return null==e||!1===e?"":""+e},number:parseFloat,date:function(e,t){var n=this.options&&this.options[t]&&this.options[t].dateFormat?this.options[t].dateFormat:this.dateFormat;return $.datepicker.parseDate(n,e)}},validators:{}},i={data:null,filters:null,validators:null,listeners:{change:!0,validationfail:!0},constructor:function(n,i){t.call(this,i),n=this.data?r.merge({},this.data,n):n,this.data={},this.filters=e.merge({},this.filters),this.validators=e.merge({},this.validators),this.listen(),this.set(n)},toJSON:function(){return e.merge({},this.data)},has:function(t){return e.prop(this.data,t,void 0,!0)},get:function(t){return e.prop(this.data,t)},set:function(e,t){var n=0;if(e&&"object"==typeof e){!0===t&&this.remove(Object.keys(this.data));for(var r in e)e.hasOwnProperty(r)&&(n+=o.set(this,r,e[r]))}else if(null==e)n=this.remove(Object.keys(this.data));else for(var i=0,s=arguments,a=s.length;i<a;i+=2)n+=""!==s[i]?o.set(this,s[i],s[i+1]):0;return n},remove:function(e){for(var t=0,n=e instanceof Array?e:arguments,r=0,i=n.length;r<i;r++)t+=o.remove(this,n[r]);return t},push:function(e){var t=arguments,r="boolean"==typeof e&&n.shift.call(t);return o.pushUnshift(this,n.push,t[0],r?t[1]:n.slice.call(t,1))},unshift:function(e){var t=arguments,r="boolean"==typeof e&&n.shift.call(t);return o.pushUnshift(this,n.unshift,t[0],r?t[1]:n.slice.call(t,1))},pop:function(e){return o.popShift(this,n.pop,e)},shift:function(e){return o.popShift(this,n.shift,e)},splice:function(e){var t=arguments,r="boolean"==typeof e&&n.shift.call(t);return o.splice(this,t[0],t[1],t[2],r?t[3]:n.slice.call(t,3))},filter:function(e,t){for(var n=this.filters?this.filters[e]:null,r=(n?n.length:0)-1;-1<r;r++)t=n[e].call(this,t);return t},validate:function(e,t){for(var n,r="",i=this.validators?this.validators[e]:null,o=(i?i.length:0)-1;o>=0;o--)(n=i[o].fn.apply(this,[t].concat(i[o].args)))&&(r+=(r?"\n":"")+n);return r},addValidator:function(e,t){if("object"!=typeof e)return o.validator.apply(this,arguments),this;for(var n in e)t=e[n],t instanceof Array?o.validator.apply(this,[n].concat(t)):o.validator.call(this,n,t);return this},removeValidator:function(){return this}},o={isObj:function(e,t){var n=typeof e;return e&&("object"===n||t&&"function"===n)},split:function(e){return(e+"").split(".")},set:function(t,n,r){var i=t.validate(n,r=t.filter(n,r));if(i)return t.trigger("validationfail",n,r,i),-1;var s,a,l,c,u,p,f=o.split(n),h=t.data,d=[];for(u=0,p=f.length;u<p;u++,h=h[s])if(s=f[u],a=s in h,l=h[s],c=c?c+"."+s:s,u===p-1){if(!a||!e.isEqual(l,r))return o.collectTrigger(t,n,r,l,d),h[s]=r,o.releaseTrigger(t,d,n),1}else o.isObj(h[s],!0)||(h[s]=null==l?{}:new l.constructor(l.valueOf())),d.push(c,l,l);return 0},remove:function(e,t){var n,r,i,s,a=o.split(t),l=e.data,c=[];for(i=0,s=a.length;i<s&&null!=l;i++)if(n=a[i],r=r?r+"."+n:n,i===s-1){if(n in l)return null===l[n]?c.push(t,void 0,null):void 0!==l[n]&&o.collectTrigger(e,t,void 0,l[n],c),delete l[n],o.releaseTrigger(e,c,t),1}else c.push(r,l[n],l[n]),l=l[n];return 0},pushUnshift:function(t,n,r,i){if(i&&i.length){var s,a,l,c,u,p,f,h=o.split(r),d=t.data,v=[];for(l=0,c=h.length;l<c;l++,d=d[s]){if(s=h[l],a=a?a+"."+s:s,u=d[s],l===c-1)return p=e.clone(u),o.isObj(u,!0)||(d[s]=null==u?[]:new u.constructor(u.valueOf())),f=n.apply(d[s],i),o.collectTrigger(t,r,d[s],p,v),o.releaseTrigger(t,v,r),f;o.isObj(u,!0)||(d[s]=null==u?{}:new u.constructor(u.valueOf())),v.push(a,u,u)}}},popShift:function(t,n,r){var i,s,a,l,c,u,p,f=o.split(r),h=t.data,d=[];for(a=0,l=f.length;null!=h&&a<l;a++,h=h[i])if(i=f[a],s=s?s+"."+i:i,c=h[i],a===l-1){if(c&&c.length)return u=e.clone(c),p=n.call(c),o.collectTrigger(t,r,c,u,d),o.releaseTrigger(t,d,r),p}else d.push(s,c,c)},splice:function(t,r,i,s,a){if(0!==s||a&&a.length){var l,c,u,p,f,h,d,v,g,m=o.split(r),y=t.data,b=[],w=a&&a.length;for(u=0,p=m.length;null!=y&&u<p;u++,y=y[l])if(l=m[u],c=c?c+"."+l:l,f=y[l],u===p-1){if(h=f&&f.length||0,i<h||w)return o.isObj(f,!0)||(y[l]=null==f?[]:new f.constructor(f.valueOf())),d=e.clone(f),g=[i,null==s?Math.max(h-i,0):s].concat(a),v=n.splice.apply(y[l],g),e.isEqual(y[l],d)||(o.collectTrigger(t,r,y[l],d,b),o.releaseTrigger(t,b,r)),v}else{if(!o.isObj(f,!0)){if(!w)return;y[l]=null==f?{}:new f.constructor(f.valueOf())}b.push(c,f,f)}}},collectTrigger:function(t,n,r,i,o){o.push(n,r,i);for(var s,a,l,c=t.listeners.change,u=(null==r&&null==i?0:c.length)-1,p=n.length+1;-1<u;u--)s=c[u],!s||!s.ns||s.ns.substr(0,p)!==n+"."||s.ns in o||(a=e.prop(r,s.ns.substr(p)),l=e.prop(i,s.ns.substr(p)),o[s.ns]=!e.isEqual(a,l),o[s.ns]&&o.push(s.ns,a,l))},releaseTrigger:function(e,t,n){for(var r=t.length-1;-1<r;r-=3)e.trigger("change:"+t[r-2],t[r-1],t[r],n)},validator:function(e,t){var n,i=$.makeArray(arguments),o=this.validators;if(!1===e)return e=t,t=i[2],void(o&&delete o[e]);if(n="string"==typeof t?r.validators[t]:t,"function"!=typeof n)throw'validator "'+t+'" MUST be an function or an valid resourse (look @ leila.Model.validator)';o=o||{},o[e]=o[e]||[],o[e].push({fn:n,args:i.slice(2)}),this.validators=o}};return leila.Model=e.construct(t,i),leila.Model}),function(e){"use strict";"function"==typeof define?define("leila/abstract/optionSet",[],e):e()}(function(){"use strict";var e=function(){n.is(this)?this.setOptions.apply(this,arguments):n.make.apply(n,arguments)},t={__optionset__:e,getOption:function(e){var t="get"+n.ucfirst(e);return"function"==typeof this[t]?this[t]():this[e]},setOption:function(e,t){var r,i=n.ucfirst(e);return"function"==typeof this[r="add"+i]?this[r](t):"function"==typeof this[r="set"+i]?"options"!==e&&"option"!==e&&this[r](t):this[e]=t,this},setOptions:function(e){for(var t in e)e.hasOwnProperty(t)&&this.setOption(t,e[t]);return this}},n={is:function(t){return t&&(t instanceof e||e===t.__optionset__)},make:function(e,n){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return n?e.setOptions(n):e},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}};for(var r in t)t.hasOwnProperty(r)&&(e.prototype[r]=t[r]);var i=window||global;return i.leila=i.leila||{},(i.leila.abstract||(i.leila.abstract={})).OptionSet=e,e}),define("leila/view/modelViewBinder/variable",[],function(){"use strict";var e=function(e,t,n,r,i){var o=this.re.exec(t);o&&(this.model=o[1],this.prop=o[2],this.view=e,this.opts=n,r&&this.bindEl(r,i))};return e.unbind=function(e){var t=$.data(e,"boundVars");if(t){for(var n=t.length-1;-1<n;n--)t[n].unbindEl();$.removeData(e,"boundVars")}},e.prototype={re:/^(?:(.+?):)?(.+)$/,constructor:e,valueOf:function(){var e=this.view[this.model];return e?e.get(this.prop):void 0},bindEl:function(e,t){this.el=e,this.type=t;var n=this.view[this.model],r=$.data(this.el,"boundVars");return n&&(r?r.push(this):$.data(this.el,"boundVars",[this]),n.on("change:"+this.prop,this.updateEl,this)),this},unbindEl:function(){var e=this.view[this.model];return e&&e.off("change:"+this.prop,this.updateEl,this),this},updateEl:function(){var e=this.view.modelViewBinder,t=e.__boundEl__,n=this.opts.src,r=this.opts.type||this.type,i=t[n]&&t[n][r]?t[n][r].__config__:null;i?e.updateView([this.el],i,r):console.error("cannot read config from",this)}},e}),define("leila/view/modelViewBinder/options",["leila/leila","./variable"],function(ll,Variable){"use strict";var Options=ll.construct({statics:{noop:{},renderer:{"&&":"boolAnd","||":"boolOr","^^":"boolXor","&!":"boolAndNot","|!":"boolOrNot","!!":"boolean","+":"operateSum","-":"operateSubtract","*":"operateMultiply","/":"operateDivide","%":"operateModulo","?!":"std","?=":"casewhen"},parse:function(e,t,n,r,i){if(""===e||"object"==typeof e)return e||null;var o,s,a,l,c,u,p=0,f=e,h=i||{},d=n&&n.tagName?Options.resolveElNamespaces(n):null;for(n instanceof Array&&(d=n,n=null,r="");s=Options.re.bind.exec(f);)if(p++,f=f.substr(s[0].length),o={model:s[3],prop:s[4]},!o.model&&d&&(o=Options.resolveModelProp(o,d)),o.model){for(o.src=o.model+":"+o.prop,o.at=s[1]||"",o.atType=s[2]||"";a=Options.re.renderer.exec(s[5]||"");){if(c=[a[2]||Options.renderer[a[1]],null],!c[0])throw"renderer `"+a[1]+"` is not defined";for(;l=Options.re.arg.exec(a[3]||"");)(c[1]||(c[1]=[])).push(Options.parseOption(l[1],o,t,n,r,d));if(!a[2]&&!c[1])throw"shorthand renderer `"+a[1]+" | "+c[1]+"` needs arguments";(o.renderer||(o.renderer=[])).push(c)}for(;a=Options.re.option.exec(s[6]||"");)o[a[1]]=Options.parseOption(a[2]);if(o.renderer)for(o.renderer=o.renderer instanceof Array?o.renderer:[o.renderer],c=o.renderer,u=c.length-1;-1<u;u--)c[u]=c[u]instanceof Array?c[u]:[c[u]];o.at?(o.type="prop",(h.elProps||(h.elProps=[])).push(o)):$.extend(h,o)}else console.warn("no model for data-bind-options",s,e,n);return p?h:(console.warn("error while parsing data-bind options",e,i),null)},parseOption:function(str,opts,view,el,bindType,ns){if(!str)return str;if(ll.isJSON(str))return eval("("+str+")");var mvbVar=new Variable(view,str,opts);return ns&&Options.resolveModelProp(mvbVar,ns),el?mvbVar.bindEl(el,bindType):mvbVar.valueOf()},resolveElBindType:function(e){var t=e.getAttribute("data-bind-repeat")?"repeat":"radio"===e.type||"checkbox"===e.type?"check":Options.re.formElementTag.test(e.tagName)?"input":"html";return t},resolveElNamespaces:function(e){var t,n,r,i,o,s,a=[],l=e;for(n=0;l&&null==a.model;l=l.parentNode,n++){if(s=$.attr(l,"data-model")){a.model=s;break}if(s=$.attr(l,"data-bind-ns"))for(i=a.length;t=Options.re.ns.exec(s);)t[1]&&"*"===t[2]?a.model=t[1]:a.splice(i,0,{model:t[1],prop:t[3],alias:t[4]})}for(n=0,i=a.length;n<i;n++){for(r=n+1;!a[n].model&&r<i;r++)o=Options.namespaceUntil(a[n].prop,a[r].alias),-1<o&&(a[n].prop=a[r].prop+a[n].prop.substr(o-1),a[n].model=a[r].model);a[n].model=a[n].model||a.model}return a},namespaceUntil:function(e,t){var n=null!=t?t.length+1:0;return!n||t!==e&&t+"."!==e.substr(0,n)?-1:n},resolveModelProp:function(e,t){for(var n,r,i=0,o=t?t.length:0;!e.model&&i<o;i++)n=Options.namespaceUntil(e.prop,t[i].alias),-1<n&&(r=e.prop.substr(n),e.prop=t[i].prop+e.prop.substr(n-1),e.model=t[i].model);return!e.model&&t&&(e.model=t.model),e}},constructor:function(e,t){var n=Options.resolveElBindType(t),r="bind"+("repeat"===n?"-"+n:"");if(this.mvb=e,this.el=t,this.type=n,this.data=r,Options.parse($.attr(t,"data-"+r),e.view,t,n,this),!this.model&&!this.elProps)return Options.noop;if("repeat"===n){this.item=this.item||"item",this.key=this.key||"key";for(var i,o=t.attributes,s={"data-bind-ns":this.src+".{{"+this.key+"}} "+this.item,"data-bound-repeat":this.src},a=t.innerHTML,l=o.length-1;-1<l;l--)i="value"in o[l]?o[l].value:o[l].nodeValue,"data-bind-repeat"!==o[l].name&&""!==i&&(s[o[l].name]=i,$.removeAttr(t,o[l].name));this.tpl=ll.htmlElement(t.tagName.toLowerCase(),s,a),a&&ll.jq(t).html(""),t.style.display="none"}else"html"===n&&!1=="escape"in this&&(this.escape=!0);$.removeAttr(t,"data-"+r),$.attr(t,"data-"+r.replace(/^bind/,"bound"),this+""),$.data(t,r,this)},toString:function(){for(var e=this.src||"",t=this.elProps,n=(t?t.length:0)-1;-1<n;n--)e+=(e?", ":"")+t[n].at+t[n].atType+t[n].src;return e}});return Options}),define("leila/view/modelViewBinder/viewUpdater",["leila/leila"],function(e){"use strict";var t={repeat:function(t,n){var r,i,o,s,a,l,c,u=this,p=function(e,t){return c+=(c?"\n":"")+u.renderTemplate(i.tpl,t,e,i),a++,!(i&&i.limit&&a>=i.limit)};for(s=0,l=t.length;s<l;s++)r=e.jq(t[s]),i=r.data("bind-repeat"),o=r.data("bind-lock"),i&&!o&&(a=0,c="",n&&e.size(n)&&e.each(n,p),i.repeatEl&&(i.recursive&&this.unbind(i.repeatEl),r.insertBefore(i.repeatEl[0]),i.repeatEl.remove(),delete i.repeatEl),c&&(i.repeatEl=$(c).data("bind-repeat-orig",t[s]).insertAfter(r),r.detach(),i.recursive&&this.bind(i.repeatEl)))},check:function(t,n){for(var r,i,o,s=n instanceof Array?n:null,a=0,l=t.length;a<l;a++)i=$.data(t[a],"bind"),s?r=-1<s.indexOf(t[a].value):(o=this.renderValue(n,i),r=o==t[a].value),r!==t[a].checked&&e.jq(t[a]).prop("checked",r).trigger("change",this)},prop:function(t,n,r){for(var i,o,s,a,l,c=0,u=t.length;c<u;c++)for(i=$.data(t[c],"bind"),s=i&&i.elProps?i.elProps.length-1:-1;s>=0;s--)r.src===i.elProps[s].src&&(o=i.elProps[s],a=this.renderValue(n,o),"#"===o.atType?e.prop(t[c],o.at,a):"@"===o.atType&&(l=e.dasherize(o.at),null==a||""===a||!1===a?$.removeAttr(t[c],l):$.attr(t[c],l,!0===a?l:a)))},input:function(e,n,r){return t.std.call(this,e,n,r,"val")},html:function(e,n,r){return t.std.call(this,e,n,r,"html")},std:function(){var t=function(e,t){for(var t,n="object"==typeof t&&null!=t.length?t:[t],r=n.length-1;-1<r;r--)t=n[r],""===t||null==t||e.searchItem(t)||e.pushItem(t)},n=function(t,n){""===n||null==n||e.search(t.options,"value",n)||t.options.add(new Option("",n))};return function(r,i,o,s){for(var a,l,c,u,p,f=0,h=r.length;f<h;f++)c=r[f],u=e.jq(c),(a=u.data("bind"))&&(l=this.renderValue(i,a),a.recursive?(a.contEl&&(this.unbind(a.contEl),a.contEl.remove(),delete a.contEl),l&&(a.contEl=$(l).appendTo(u),this.bind(a.contEl)),u.trigger("change",this)):l!==u[s]()&&((p=u.data("dependentContextMenu"))&&null!=i?t(p,i):"select"===c.tagName.toLowerCase()&&n(c,l),u[s](l).trigger("change",this)))}}()};return t}),define("leila/view/modelViewBinder",["leila/leila","./modelViewBinder/options","./modelViewBinder/variable","./modelViewBinder/viewUpdater"],function(e,t,n,r){"use strict";var i="\"[^\"]*\"|'[^']*'",o="(?:-|\\b)\\d+(?:\\.\\d+)?(?:e-?\\d+)?\\b",s=i+"|\\[[^\\]]+\\]|\\{[^\\}]+\\}|(?:\\b(?:undefined|null|true|false|NaN)\\b|(?:-|\\b)Infinity\b|"+o+")",a=s+"|[_:\\.\\w]+(?!\\s*=)",l="\\s*(&&|\\|\\||\\^\\^|&!|\\|!|!!|\\?=|\\-|\\+|\\*|\\/%|\\?!|\\|\\s*([\\._\\w]+))((?:\\s*(?:"+a+"))*)?",c="(?:([_\\w][-_\\.\\w]*)([@#]))?(?:([_\\w][\\$_\\.\\w]*):)?([_\\w][-_\\.\\w]*)((?:"+l.replace(/\((?!\?[:!=])/g,"(?:")+")+)?((?:\\s+[\\$_\\w]+=(?:"+i+"|[\\$_\\.\\w]+))+)?",u=e.construct({statics:{re:{bind:new RegExp("^\\s*"+c+"\\s*(,\\s*|$)"),renderer:new RegExp(l,"g"),arg:new RegExp("(?:^|\\s+)("+a+")","g"),option:new RegExp("(?:^|\\s+)(\\S+?)\\s*=\\s*("+a+")(?=\\s|$)","g"),placeholder:/\{\{(.+?)\}\}(?=$|[^\}])/,placeholders:/\{\{(.+?)\}\}(?=$|[^\}])/g,ns:/(?:([_\w][-_\.\w]*):)?(([_\w][-_\.\w]*)(?:\s+([_\w]+))?|\*)(?=\s*(?:,|$))/g,formElementTag:/^(input|select|textarea|button)$/i}},constructor:function(e){this.view=e,this.__boundEl__={}},bind:function(e){var t,n,r,i,o,s,a,l,c,u,p=this,f=this.__boundEl__,h={};e=e&&e instanceof $?e:e?$(e):this.view.$el,t=e.find("[data-bind-repeat]").addBack("[data-bind-repeat]").each(function(){p.initEl(this,h)});for(var d=0,v=e.length;d<v;d++)this.preparePlaceHolder(e[d]);n=e.find("[data-bind]").addBack("[data-bind]").each(function(){p.initEl(this,h)});for(var s,l,r=Object.keys(h),o=r.length-1;-1<o;o--){for(i=r[o],u=null,s=Object.keys(h[i]),l=s.length-1;-1<l;l--)a=s[l],c=h[i][a],f[i]=f[i]||{},f[i][a]?f[i][a].push.apply(f[i][a],$.makeArray(c)):f[i][a]=c,u=f[i][a].__config__,"repeat"!==a&&"prop"!==a&&c.on("change",u,this.updateModel);u&&(this.view[u.model].on("change:"+u.prop,this.updateView,this,u),this.updateView(h[u.src],u))}return this},unbind:function(t){t=t&&t instanceof $?t:t?$(t):this.view.$el;var r,i,o,s,a,l,c,u,p,f,h,d="[data-bound], [data-bound-repeat]",v=this.__boundEl__,g=t.find(d).addBack(d);for(r=Object.keys(v),o=r.length-1;o>-1;o--){for(i=r[o],p=null,s=Object.keys(v[i]),l=s.length-1;l>-1;l--){for(a=s[l],c=v[i][a],p=c.__config__,c.off("change",p,this.updateModel),f=c.length-1;f>-1;f--)h=g.index(c[f]),-1<h&&(u=c.splice(f,1)[0],n.unbind(u));c.length||delete v[i][a]}e.isEmpty(v[i])&&p&&(this.view[p.model].off("change:"+p.prop,this.updateView,this,p),delete v[i])}return this},initEl:function(e,n){var r,i=this,o=new t(i,e);if(o===t.noop)return void window.console.warn("empty bind-options for",e);for(var s=o.elProps,a=s?s.length:0,l=-1;l<a;l++)(-1!==l||o.model)&&(-1<l&&(o=s[l]),n[o.src]||(n[o.src]={}),null==(r=n[o.src][o.type])&&(r=new $,r.__config__={prop:o.prop,model:o.model,src:o.src,type:o.type,item:r,view:i.view,mvb:i},(n[o.src]||(n[o.src]={}))[o.type]=r),0>r.index(e)&&r.push(e))},preparePlaceHolder:function(e){var t,n,r,i,o,s,a,l,c,p,f=u.re.placeholder,h=this.getTextNodes(e),d=function(e,t,n){return n?t.insertBefore(e,n):t.appendChild(e)};for(l=0,p=h.length;l<p&&(o=h[l]);l++){for(i=o.nodeValue,a=o.nextSibling,s=o.parentNode,c=0;null!=(t=f.exec(i));c++){if(0===c&&1===s.childNodes.length&&t[0]===i&&!s.hasAttribute("data-bind")){s.setAttribute("data-bind",t[1]),s.removeChild(o),i="";break}r=i.substr(0,t.index),i=i.substr(t.index+t[0].length),0===c&&""!==r?o.nodeValue=r:0===c?s.removeChild(o):""!==r&&d(document.createTextNode(r),s,a),n=document.createElement("span"),n.setAttribute("data-bind",t[1]),d(n,s,a)}c&&""!==i&&d(document.createTextNode(i),s,a)}},getTextNodes:function(e){if(-1===[1,5,6,9,11].indexOf(e.nodeType))return 3===e.nodeType?[e]:[];var t=[];if("function"==typeof document.createTreeWalker)for(var n,r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);null!=(n=r.nextNode());)t.push(n);else{var i=function(e){for(var n,r=0,o=e.length;r<o;r++)n=e[r],3===n.nodeType?t.push(n):n.childNodes&&n.childNodes.length&&i(n.childNodes)};e.childNodes&&i(e.childNodes)}return t},updateModel:function(t){var n,r,i,o,s,a=t.data,l=a.view,c=a.model,u=a.prop,p=a.item,f=t.currentTarget,h=$.data(f,"bind");if(!a.stop&&a.mvb.isFormElement(f)){if("radio"===f.type)i=p.filter(":checked").val();else if("checkbox"===f.type&&h.array)for(i=[],s=p.length-1;-1<s;s--)p[s].checked&&0>i.indexOf(p[s].value)&&i.push(p[s].value);else i="checkbox"===f.type?h.checkValues?h.checkValues[f.checked?0:1]:f.checked?f.value:h.uncheckedValue:f["input"===a.type?"value":"innerHTML"];if(n=l.reader[h.reader]||l.reader.std,o=n.call(l,i,h),!f.validity||!1!==f.validity.valid){if(r=e.jq(f).parents("[data-bound-repeat]").data("bind-repeat-orig"),r&&$.data(r,"bind-lock",!0),0>l[c].set(u,o)){var d=p.__config__;this.updateView[d.type].call(d.mvb,p,l[c].get(u),d)}r&&$.data(r,"bind-lock",!1)}}},updateView:function(){var e=function(e,t,n,i){i&&!i.stop&&(i.mvb.updateEl=t,i.stop=!0,r[e].call(i.mvb,t,n,i),i.stop=!1,i.mvb.updateEl=null)};return function(t,n,r){var i,o;if(t&&t.type&&"ns"in t?(n=t.data,i=n&&this.__boundEl__&&this.__boundEl__[n.src],r=void 0):i=t,o=n.view[n.model].get(n.prop),r)e(r,i,o,n);else for(r in i)i.hasOwnProperty(r)&&e(r,i[r],o,i[r].__config__);return this}}(),isFormElement:function(e){return!(e.readonly||e.getAttribute("readonly")||e.disabled||e.getAttribute("disabled")||!u.re.formElementTag.test(e.tagName)&&!e.contenteditable)},renderValue:function(e,t){if(!t||!t.renderer)return this.view.renderer.std.call(this.view,e,t);var r,i,o,s,a=0;for(t.renderer.length;r=t.renderer[a];a++)if(null==(i=this.view.renderer[r[0]])&&(window.console.warn('renderer "'+r[0]+'" is not registered in view',r,t,this.view),i=this.view.renderer.std),r[1]){for(o=[e].concat(r[1]),s=o.length-1;s;s--)o[s]instanceof n&&(o[s]=o[s].valueOf());e=i.apply(this.view,o)}else e=i.call(this.view,e,t);return e},renderTemplate:function(e,n,r,i){var o=this,s=i&&i.item,a=i&&i.key,l=[{model:i.model,prop:i.prop+"."+r,alias:s}];l.model=i.model;var c=e.replace(u.re.placeholders,function(e,n){var s,c=t.parse(n,o.view,l);if(!c)return"";if(c.prop===a)s=r;else{if(i.recursive&&"attrib"!==i.recursive)return e;o.view[c.model]&&(s=o.view[c.model].get(c.prop))}return o.renderValue(s,c)});return c}});return t.re=u.re,u.Options=t,u.Variable=n,e.ns("leila.view").ModelViewBinder=u,u}),define("leila/view/renderer",["../leila"],function(e){"use strict";var t=Array.prototype,n={std:function(t,n,r,i){return n&&"object"==typeof n?(i=n.escape,r=n.emptyOut,n=n.empty):arguments.length<3&&(r=n,n=""),null==r&&(r=""),null==n&&(n=""),null==t||!1===t||""===t||n===t||"number"==typeof t&&isNaN(t)?r:i?e.escapeHtml(""+t):""+t},ifEmpty:function(e,t){if(!e)return t;for(var n=2,r=arguments,i=r.length;n<i;n++)if(e===r[n])return t;return e},date:function(t,n){return n&&"object"==typeof n&&(n=n.dateFormat),t?e.dateFormat(t,null!=n?n:"dd.mm.yy"):"";
},price:function(t,n,r,i){n&&"object"==typeof n&&(r=n.dsep,i=n.tsep,n=n.unit);var o=e.numFormat(t,2,null!=r?r:",",i);return""!==o?o+(null!=n&&""!==n?" "+n:""):o},number:function(t,n,r,i){return n&&"object"==typeof n&&(r=n.dsep,i=n.tsep,n=n.digits),e.numFormat(t,n,r,i)},boolean:function(e,t,n){if(t&&"object"==typeof t)n="no"in t&&t.no,t=!("yes"in t)||t.yes;else{var r=arguments.length;n=r>2&&n,t=!(r>1)||t}return e&&"0"!==e?t:n},boolAnd:function(){for(var e=arguments,t=e.length,n=0;n<t;n++)if(!e[n])return e[n];return e[t-1]},boolOr:function(){for(var e=arguments,t=e.length,n=0;n<t;n++)if(e[n])return e[n];return e[t-1]},boolXor:function(e,t){return e&&!t||!e&&t},boolOrNot:function(e,t){return e||!t},boolAndNot:function(e,t){return e&&!t},casewhen:function(e,n){for(var r=n&&"object"==typeof n?n.cases||[]:t.slice.call(arguments,1),i=0,o=r.length;i<o;i+=2)if(e===r[i])return r[i+1];return o%2?r[o-1]:""},operate:function(e,t,n){if(t&&"object"==typeof t){n=t.value;var t=t.operator}if("!"===t)return!e;if("+"===t&&"string"==typeof n)return e+""+n;switch(e=parseFloat(e)||0,n=parseFloat(n),isNaN(n)&&(n="/"===t||"%"===t?1:0),t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;default:return""}},operateSum:function(){for(var e=arguments,t=e.length,n=0,r=0;n<t;n++)r+=parseFloat(e[n])||0;return r},operateSubtract:function(){for(var e,t=arguments,n=t.length,r=0,i=0;r<n;r++)e=parseFloat(t[r])||0,i=r?i-e:e;return i},operateMultiply:function(){for(var e=arguments,t=e.length,n=0,r=0;n<t;n++)r*=parseFloat(e[n])||0;return r},operateDevide:function(){for(var e,t=arguments,n=t.length,r=0,i=0;r<n;r++)e=parseFloat(t[r])||1,i=r?i/e:e;return i},operateModulo:function(){for(var e,t=arguments,n=t.length,r=0,i=0;r<n;r++)e=parseFloat(t[r])||1,i=r?i%e:e;return i},operatePow:function(){for(var e,t=arguments,n=t.length,r=0,i=0;r<n;r++)e=parseFloat(t[r])||1,i=r?Math.pow(i,e):1<n?e:0;return i},math:function(e,n,r){return n&&"object"==typeof n?(r=n.args,n=n.fn):r=t.slice.call(arguments,2),r=r?[e].concat(r):[e],Math[n].apply(Math,r)},sum:function(t,n){n&&"object"==typeof n&&(n=n.sumProp);var r=0;return t&&$.each(t,function(t,i){i=parseFloat(n?e.prop(i,n):i),r+=i||0}),r},removeTags:function(){var e=document.createElement("div");return function(t){return e.innerHTML=t,e.innerText}}(),json:function(e){return void 0===e||"function"==typeof e?"":JSON.stringify(e)},firstNotEmpty:function(){for(var t=arguments,n=t.length,r=0;r<n;r++)if(!e.isEmpty(t[r]))return t[r]},compare:function(t,n){return e.isEqual(t,n)?"=":t>n?">":"<"},concat:function(){for(var e=arguments,t=e.length,n=0,r="";n<t;n++)r+=e[n];return r}};return n}),define("leila/view/reader",["../leila"],function(e){var t={std:function(e){return e},trim:function(e){return e?(e+"").replace(/(^\s+|\s+$)/g,""):""},number:function(e,t){t&&"object"==typeof t&&(t=t.dsep),null==t&&(t=",");var n=/^\s*-/.test(e)?-1:1;return e=e?parseFloat((""+e).replace(new RegExp("[^\\d\\"+t+"]+","g"),"").replace(t,".")):0,isNaN(e)?0:n*e},int:function(){return parseInt(t.number.apply(this,arguments))},date:function(t,n){if(t instanceof Date)return t;n&&"object"==typeof n&&(n=n.dateFormat);var r=null==t||t instanceof Date?t:e.dateCreate(t);return r},json:function(e){try{return"string"==typeof e&&""!==e?JSON.parse(e):e}catch(e){return}}};return t}),define("leila/view",["./leila","./abstract/observable","./abstract/optionSet","./view/modelViewBinder","./view/renderer","./view/reader"],function(e,t,n,r,i,o){"use strict";var s=Array.prototype,a='<div class="ui-lock" data-role="lock"><h2 class="ui-lockMsg loader" data-role="lock-msg"></h2></div>',l={renderer:i,reader:o,createElementSetter:function(){var e=this.prototype;return $.each(arguments,function(t,n){var r=n.charAt(0).toUpperCase()+n.substr(1);e["set"+r]=function(){return s.unshift.call(arguments,n),this.content.apply(this,arguments)},e["append"+r]=function(){return s.unshift.call(arguments,n),this.append.apply(this,arguments)}}),this}},c=e.construct(t,{$el:null,el:null,target:null,targetPlacement:"",sel:null,tpl:null,events:null,listeners:{resize:!0,move:!0},renderer:null,reader:null,options:null,animDuration:150,placeholderRe:/\{\{(.+?)\}\}/g,placeholderMaxRecursion:10,flexSupport:!0,statics:l,constructor:function(e){t.call(this);var n=this,r=0;n.initialize.apply(n,arguments);var i=function(e,t){return t in n.sel?n.replacePlaceholders(n.sel[t]||""):""};this.replacePlaceholders=function(e){return++r<n.placeholderMaxRecursion?e=e.replace(n.placeholderRe,i):window.console.warn("recursion ["+r+"] of placeholder-replace is reached",e),r--,e},this.el=this.el||{},this.renderer=$.extend({},l.renderer,this.renderer),this.reader=$.extend({},l.reader,this.reader),this.setSel($.extend({},this.sel),!0),this.setEvents($.extend({},this.events),!0);var o=this.tpl;if(this.tpl={},o&&this.setTpl(o),e=this.options=$.extend({},this.options,e||{}),this.setOptions(e),this.listenTo("resize","move"),this.$el||(this.setEl(this.tpl.el||this.tpl.cont,e),this.$el)){if(!1=="__auto__"in this.sel||this.sel.__auto__)for(var s in this.sel)this.sel.hasOwnProperty(s)&&"_"!==s.charAt(0)&&(this.el[s]=this.$el.find(this.sel[s]));this.events&&(!1=="__auto__"in this.events||this.events.__auto__)&&this.bindEventHandlers()}},initialize:$.noop,on:function(){var e=t.prototype.on.apply(this,arguments),n=this.listeners;return!this.__resizeMove__&&n&&(n.resize&&n.resize.length||n.move&&n.move.length)&&(this.__resizeMove__=u.observeResizeMove.call(this)),e},off:function(){var e=t.prototype.off.apply(this,arguments),n=this.listeners;return!this.__resizeMove__||n&&(n.resize&&n.resize.length||n.move&&n.move.length)||(u.observeResizeMove.call(this,this.__resizeMove__),delete this.__resizeMove__),e},setEl:function(e){return"function"==typeof e&&(e=e.apply(this,[].slice.call(arguments,1))),this.$el=e?(e instanceof $?e:$(e)).data("leilaView",this):null,this},setSel:function(e,t){e=this.sel=t?e:$.extend(this.sel,e);for(var n in this.sel)""===e[n]||null==e[n]?delete e[n]:"string"==typeof e[n]&&(e[n]=this.replacePlaceholders(e[n]));return this},setEvents:function(e,t){!t&&this.events||(this.events={});for(var n in e)""===e[n]||null==e[n]?delete this.events[n]:e[n]&&(this.events[this.replacePlaceholders(n)]=e[n]);return this},setTpl:function(t){for(var n in t)t.hasOwnProperty(n)&&(this.tpl[n]="string"==typeof t[n]&&"_!"===t[n].substr(0,2)?e.template(t[n].substr(2)).bind(this):t[n]);return this},setRenderer:function(e){return $.extend(this.renderer,e),this},setReader:function(e){return $.extend(this.reader,e),this},bind:function(e,t){var n=this,r=(this.__boundFn__?this.__boundFn__.length:0)-1;for("function"!=typeof e&&(e="function"==typeof this[e]?this[e]:null);e&&-1<r;r--)if(this.__boundFn__[r].origin===e)return t?this.__boundFn__.splice(r,1)[0]:this.__boundFn__[r];if(t||!e)return null;var i=function(){return e.apply(n,arguments)};return i.origin=e,(this.__boundFn__||(this.__boundFn__=[])).push(i),i},bindEventHandlers:function(){var e,t,n,r=$.makeArray(arguments),i=r[0]instanceof $?r.splice(0,1)[0]:r[0]&&r[0].nodeName?$(r.splice(0,1)[0]):this.$el.is("body")?$(window):this.$el,o=/^(on|off|true|false|1|0)$/.test(r[0])?r.splice(0,1)[0]:"on",s=r[0]&&"object"==typeof r[0]?r[0]:this.events;o=/^(off|false|0)$/.test(o)?"off":"on";for(e in s)s.hasOwnProperty(e)&&"__"!==e.substr(0,2)&&(t=s[e],n=e.split(/\s*\|\s*/,2),n.push(this.bind(t,"off"===o)),i[o].apply(i,n));return this},bindModels:function(){var e=this.modelViewBinder;return e||(e=this.modelViewBinder=new r(this)),e.bind.apply(e,arguments),this},unbindModels:function(){var e=this.modelViewBinder;return e&&e.unbind.apply(e,arguments),this},jq:function(e){var t=s.slice.call(arguments,1),n=this.$el,r=n?n[e].apply(n,t):void 0;return r===n?this:r},render:function(t,n){if(t){t instanceof c&&(t=t.$el),t=t instanceof $?t:$(t);var r=/^(after|before)$/.test(n)?"insert"+e.ucfirst(n):/^(prepend|append)$/.test(n)?n+"To":"appendTo";this.$el[r](t),this.target=t,this.targetPlacement=r}return this},content:function(e,t){var n=arguments,r="boolean"==typeof n[0]&&s.shift.call(n);e="string"==typeof n[0]&&this.el[n[0]]?this.el[s.shift.call(n)]:this.$el,r||e.empty();for(var i=0,o=n.length;i<o;i++)t=n[i],e.append(t instanceof c?t.$el:null!=t?t:"");return this},append:function(){return s.unshift.call(arguments,!0),this.content.apply(this,arguments)},lock:function(t,n){if(this.el.lock||(this.el.lock=$(this.tpl.lock||a).filter("*")),!this.el.lock[0])return this;null==n&&(t=t||"",n=t);var r,i=this,o=this.__lock__,s=[t,n],l=o?e.search(o,0,t,!0):void 0,c=this.el.lock,p=Math.max(c.css("opacity"),.01);return c.stop().css({position:"absolute",left:0,top:0,opacity:p}).animate({opacity:1},this.animDuration).appendTo(this.$el),o||(r=c.find(this.sel&&this.sel.lockMsg?this.sel.lockMsg:":header"),this.__lock__=o=[],"static"===this.$el.css("position")&&(o.position=this.$el[0].style.position,this.$el.css("position","relative")),o.msgEl=r[n?"show":"hide"]().html(n||"").addClass("loader")),this.flexSupport?(c.css({display:"flex",flexDirection:"column",justifyContent:"center"}),r&&r.css("alignSelf","center")):(c.css({display:"block",width:"100%",height:"100%"}),r&&(r.css("position","absolute"),i.on("resize move",u.centerLockEl),u.centerLockEl.call(i))),void 0===l?o.push(s):o[l][1]=n,n&&o.msgEl.show().html(n),this},unlock:function(t){var n,r,i,o=this.__lock__;if(!o)return this;if(!0===t?n=o.splice(0,o.length):t?-1<(r=e.search(o,0,t,!0))&&(n=o.splice(r,1)[0]):n=o.pop(),o.length){for(r=o.length-1;-1<r&&!(i=o[r][1]);r--);o.msgEl[i?"show":"hide"]().html(i||"")}else{this.flexSupport||this.off("resize move",u.centerLockEl);var s=this;this.el.lock&&this.el.lock.stop().fadeOut(this.animDuration,function(){s.el.lock.detach(),"position"in o&&s.$el.css("position",o.position),delete s.__lock__})}return this},delay:function(e,t){var n=this,r=s.slice.call(arguments,2);return n.__timer__=setTimeout(function(){n[e].apply(n,r)},t||0),this},getLastTimer:function(){return this.__timer__}}),u={observeResizeMove:function(e){if(e)return clearInterval(e);var t,n,r=this,i=u.getDimPos(this.$el)||{},o=0;return n=setInterval(function(){return o++,null===(t=u.getDimPos(r.$el))?clearInterval(n):(t.x===i.x&&t.y===i.y||r.trigger("move",t.x,t.y,i.x,i.y),t.w===i.w&&t.h===i.h||r.trigger("resize",t.w,t.h,i.w,i.h),void(i=t))},1e3)},getDimPos:function(e){if(!e[0]||!e[0].offsetParent)return null;var t=e.offset();return{x:t.left,y:t.top,w:e.outerWidth(!0),h:e.outerHeight(!0)}},centerLockEl:function(){var e=this.__lock__&&this.__lock__.msgEl;e&&e.position({of:this.$el,my:"center center",at:"center center",collision:"none none"})}};return n(c.prototype),leila.View=c,c}),define("leila/widget/pagePanel",["../leila","../view"],function(e,t){"use strict";var n=e.construct(t,{listeners:{beforeenter:!0,enter:!0,beforeleave:!0,leave:!0,beforeclose:!0,close:!0},constructor:function(e,n){this.panel=e,this.$el=$(e.tpl.page).filter("*:first").attr("data-role","page"),this.sel=$.extend({},e.sel,{__auto__:!0}),t.call(this,n)},setTitle:function(e){if(this.el.title.html(e),this.panel.$el.is("body")){var t=$("<div>"+e+"</div>");$("head title").text(t.text()),t.remove()}return this}});n.createElementSetter("header","content","footer");var r={listeners:{beforeitemclose:function(e,t){e.waitFor("item"),t.trigger({type:"beforeclose",done:function(){e.resolve("item")},fail:function(){e.reject()}})},beforeitemchange:function(e,t,n){e.waitFor("items");var r=1,i={type:"beforeleave",done:function(){return 0===--r?e.resolve("items"):null},fail:function(){e.reject()}};n&&(r++,n.trigger(i)),t.trigger($.extend({},i,{type:"beforeenter"}))},itemchange:function(e,t,n){t&&t.trigger("enter"),n&&n.trigger("leave")}}},i={type:"page",tpl:{el:'<div data-role="pagePanel" />',page:'<section data-role="page"><header data-role="header"><h1 class="title"></h1></header><div data-role="content"></div></section><footer data-role="footer"></footer></section>'},sel:{__auto__:!1,page:"> [data-role=page]",header:"> [data-role=header]",title:"> [data-role=header] :header",content:"> [data-role=content]",footer:"> [data-role=footer]"},listeners:{beforepagechange:r.listeners.beforeitemchange,pagechange:r.listeners.itemchange,abortpagechange:!0,beforepageadd:!0,pageadd:!0},active:null,items:null,constructor:function(e,n){e&&"object"==typeof n&&/^\d+$/.test(e.length)||(n=e,e=n?n.pages||n.items:null),this.items=[],this.groups={},this.history=[],t.call(this,n),e&&e.length&&this.addPages(e),this.listen()},showPage:function(e,t){var n=this,r=n.active,i=null!=e?n.getPage(e,t):n.prepared,o=i?i.$el:null,s=r?r.$el:null;return o&&i!==r?(i!==n.prepared&&n.preparePage(i),n.trigger({type:"before"+n.type+"change",done:function(){n.page=n.active=i,s&&s.fadeOut(n.animDuration);var e=function(){delete n.prepared,o.css({position:"",width:"",left:"",top:"",opacity:""})};o.css({opacity:.01,zIndex:1,visibility:""}).animate({opacity:1,zIndex:""},n.animDuration,e),n.performOptions(t),n.trigger(n.type+"change",i,r)},fail:function(){i.$el.css("display","none"),n.trigger("abort"+n.type+"change",i,r)}},i,r)):null},getPage:function(t,r){if(null==t)return this.active;if(t instanceof n)return t;if(/^\d+$/.test(t))return this.items[t];r=t&&"object"==typeof t?t:e.prop(r||{},"id",t);var i=r.id?this.indexOf(r.id):-1;return-1<i?this.items[i]:this.addPage(r)},addPages:function(t){for(var n,r,i,o,s,a,l=0,c=t.length;l<c;l++)if(t[l]instanceof Array)if(r=t[l].length,s=r>1&&t[l][r-1]instanceof Array?t[l][r-1]:null)for(o=t[l][0],this.addGroup(o,r>2?t[l][1]:void 0),n=0,i=s.length;n<i;n++)a=e.clone(s[n]),this.addPage.apply(this,a instanceof Array?a.concat([o]):[a,o]);else this.addPage.apply(this,t[l]);else this.addPage(t[l]);return this},addPage:function(t,r){r=t&&"object"==typeof t?t:r&&"object"==typeof r?e.prop(r||{},"id",t):{id:t,label:r||t};var i,o,s=r.id?this.indexOf(r.id):-1;return!r.id||-1<s?r.id?this.items[s]:null:(i=new n(this,r),o=this.trigger({type:"before"+this.type+"add",done:function(){this.items.push(i),i.render(this).$el.hide(),this.trigger(this.type+"add",i)}},i),o&&o.isDefaultPrevented()?null:i)},preparePage:function(e){if(e=e instanceof n?e:this.getPage.apply(this,arguments),e===this.prepared)return e;if(e.$el.css({position:"absolute",visibility:"hidden",display:"",left:0,top:0}),!e.$el[0].offsetParent){var t=this.$el.find(this.sel.page).not(e.$el);t[0]?e.$el.insertAfter(t.last()):e.$el.appendTo(this.$el)}var r=this.$el.width(),i=e.$el.outerWidth(!0)-e.$el.width(),o=this.$el.offset(),s=e.$el.offset();return e.$el.css({width:r-i+"px",left:o.left-s.left+"px",top:o.top-s.top+"px"}),this.prepared=e},performOptions:function(e){e=e||{};var t=this.getPage();return t.setTitle(e.title||""),t.el.header&&t.el.header[e.title?"show":"hide"](),"content"in e&&t.setContent(e.content),t.setFooter(e.footer||""),t.el.footer&&t.el.footer[e.footer?"show":"hide"](),this},reset:function(){return this.active=null,this},closePage:function(e,t){if(e=null==e?this.active:this.getPage(e),!e)return null;var n=this,r=n.indexOf(e),i=n.trigger({type:"before"+n.type+"close",done:function(){if(!(0>(r=n.indexOf(e)))){n.items.splice(r,1);for(var o=n.history.length-1;-1<o;o--)e.id===n.history[o]&&n.history.splice(o,1);null==t&&(t=e.active&&n.history.length?n.history.pop():e.active&&n.items[0]?n.items[0].id:"");var s=""!==t&&!1!==t?n.indexOf(t):-1;e.$el.fadeOut(n.animDuration,function(){e.$el.remove(),n.trigger(n.type+"close",e,r,n.items[s],s),-1<s&&(!i||n.eventSwitch)&&n.showPage(t)})}}},e,r);return i&&i.isDefaultPrevented()?null:e},indexOf:function(e){if(e instanceof this.constructor.Item)return this.items.indexOf(e);e=e instanceof $?e[0]:e;for(var t,n=this.items.length-1;-1<n&&(t=this.items[n],e!==t.id&&t.$el[0]!==e);n--);return n},isIndex:function(e){return/^\d+$/.test(e)}};return e.ns("leila.widget"),leila.widget.PagePanel=e.construct(t,i),leila.widget.PagePanel.Page=leila.widget.PagePanel.Item=n,leila.widget.PagePanel}),function(e){"use strict";"function"==typeof define?define("leila/mvc/request",[],e):e()}(function(){"use strict";var e=window||global,t=function(e,t,n){this.request=e,Array.call(this);for(var r=0;r<t;r++)this.push(n&&n[r]?n[r]:e.stdModule[r]||"index")};t.prototype=[],t.prototype.constructor=t,t.prototype.toString=function(){return this.join("/")},t.prototype.assemble=function(e){e=e&&0<e?Math.min(e,this.length):e&&0>e?this.length+(e-0):this.length;for(var t=0,n="";t<e;t++)n+=(n?"/":"")+i.dasherize(this[t]);return this.request.useHash&&n?"#"+n:n};var n=function(e){if(e&&"object"==typeof e){var t;for(var n in e)t="set"+n.charAt(0).toUpperCase()+n.substr(1),"function"==typeof this[t]?this[t](e[n]):e.hasOwnProperty(n)&&null!=e[n]&&(this[n]=e[n]);Array.prototype.shift.call(arguments)}return this.init.apply(this,arguments)},r=n.prototype={urlExpr:new RegExp("^(?:(\\w+?:\\/\\/)([^\\/:]*)(:\\d+)?)?(.*?)(\\?.*?)?(?:(#.*?)([\\?&].*)?)?$"),re:{query:/(?:\?|&|^)([^=]+)=(.*?)(?=&|$)/g,nestedQueryParam:/^(.+?)\[(.*)\]$/},basePath:"",useHash:!1,stdModule:["index","index"],constructor:n,toJSON:function(){return $.extend({},this.params,this.queryParams)},toString:function(){return this.href||""},setBasePath:function(e){return this.basePath=e.replace(/^(\w+?:\/\/)([^\\/:]*)(:\\d+)?/,"").replace(/\/$/,""),this},init:function(e,t){return arguments.length&&(e=e||this.href,$.extend(this,this.parse(e,t)||{})),this},parse:function(e,n,i){var o=r.urlExpr.exec(e);if(!o)return null;n=n?parseInt(n,10):1;var s={href:o[0],protocol:(o[1]||"").replace(/\/+$/,""),hostname:o[2]||"",port:o[3]?o[3].substr(1):"",pathname:o[4]||"/",query:o[5]||"",hash:o[6]||"",hashQuery:o[7]||""};this.basePath&&0===s.pathname.indexOf(this.basePath)&&(s.pathname=s.pathname.substr(this.basePath.length)),s.host=s.hostname+(s.port?":"+s.port:""),s.origin=(o[1]||"")+(o[2]||"")+(o[3]||""),s.params=this.parsePath(this.useHash?(s.hash||"").substr(1):s.pathname,n,i),s.queryParams=this.parseQuery(this.useHash?s.hashQuery:s.query),s.module=s.params.module||new t(this,n);for(var a="get set toString toJSON useHash".split(" "),l=a.length-1;-1<l;l--)s[a[l]]=this[a[l]];return s},parsePath:function(e,n,r){for(var o=e?(""+e).replace(/(^\/+|\/+$)/g,"").split("/"):[],s=o.length,a=0,l=s?{module:new t(this,n,r)}:{};a<s;a++){var c=i.camelize(decodeURIComponent(o[a]));a<n?l.module[a]=c:0===(a-n)%2&&""!==c&&""!==o[a+1]&&void 0!==o[a+1]&&(l[c]=decodeURIComponent(o[a+1]))}return l},parseQuery:function(e){for(var t,n,i,o,s,a,l,c,u={};t=r.re.query.exec(e);){if(s=decodeURIComponent(t[2]),o=u,n=r.re.nestedQueryParam.exec(t[1])){i=decodeURIComponent(n[1]),a=n[2].split("][");for(var l=0,c=a.length;l<c;l++)o[i]&&"object"==typeof o[i]||(o[i]=""===a[l]?[]:{}),o=o[i],i=decodeURIComponent(a[l])}else i=decodeURIComponent(t[1]);o instanceof Array&&""===i?o.push(s):o[i]=s}return u},get:function(e){if(arguments.length){var t=i.camelize(e);return t in this.params?this.params[t]:this.queryParams[e]}return this.toJSON()},set:function(e,t){if(e instanceof Object){for(var n in e)e.hasOwnProperty(n)&&this.set(n,e[n]);return this}var r=i.camelize(e);return null!=t?this.params[r]=t:r in this.params&&delete this.params[r],this},assemble:function(e){return e}},i={camelize:function(){var e=/[\-\_]+(.+?)?/g,t=function(e,t){return t?t.charAt(0).toUpperCase(0)+t.substr(1):""};return function(n){return(null==n?"":n+"").replace(e,t)}}(),dasherize:function(){var e=/[A-Z]/g,t=function(e){return"-"+e.toLowerCase()};return function(n){return(null==n?"":n+"").replace(e,t)}}()};return n.Module=t,e.leila=e.leila||{},e.leila.mvc=e.leila.mvc||{},e.leila.mvc.Request=n,n}),define("leila/mvc/dispatcher",["../leila","../abstract/observable","./request"],function(e,t,n){"use strict";var r=function(e,t,n){if(t instanceof r)return t;null!=t&&"string"!=typeof t&&(n=t,t=(n.root?n.root:n).request.href);var i=n instanceof Object?n:null,o=i?i.subModuleLevel||1:parseInt(n,10)||1,s=e.request.parse(t,o,i&&i.stdModule),a=(i&&i.getPageId?i:e).getPageId(s);this.dispatcher=e,this.target=i,this.req=s,this.pageId=a},i={request:null,controller:null,controllerPath:"controller/",constructor:function(e){e=e||{},e.controllerPath&&(this.controllerPath=e.controllerPath),this.controller={},this.request=new n(e.requestOptions),t.call(this),this.listen()},resolve:function(e,t){return new r(this,e,t)},dispatch:function(e,t,n){var r,i,o,s=this,a=s.resolve(e,t),l=t.controllers||{},c=l[a.pageId],u=t.current;r=new Promise(function(e,t){i=e,o=t});var p=function(e,n){t.current=c;var r,o,s=t.root||t,l=!e&&c.stay?"stay":-1<e&&c.repeat?"repeat":"run";s.request=s.current.request,r=e&&u&&u.quit?u.quit(c):null,o=c[l](n),Promise.all([r,o]).then(function(){i({controller:c,step:e,runResult:o,resolved:a,options:n})})};return c?(setTimeout(function(){c.request=a.req,p(c===t.current?0:1,n)},0),r):(require([s.controllerPath+a.req.module],function(e){for(var r=a.target;r.parent;r=r.parent);var i={dispatcher:s,parent:t,root:r,request:a.req,moduleLevel:a.req.module.length};t.controllers=l,c=l[a.pageId]=new e(i),"moduleLevel"in c&&(i.moduleLevel=c.moduleLevel),!1=="subModuleLevel"in c&&(i.subModuleLevel=i.moduleLevel+1),$.extend(c,i),p(-1,n)}),r)},injectViewDispatching:function(e,t){var n=this,r=e.constructor.Tab?"tab":"page",i="Inhalt wird geladen";return e.on("before"+r+"change",function(r,o){if(!e.__dispatching__){e.lock("dispatch",i),r.waitFor("dispatch");var s=n.dispatch(o.id,t,o);s.then(function(){r.resolve("dispatch")}),t.dispatchPromise=s}}).on(r+"change",function(){e.__dispatching__||e.unlock("dispatch")}).on(r+"close",function(e,n){delete t.controllers[n.id]}),n},dispatchView:function(e,t,n){var r=this.resolve(e,n),i=t.constructor.Tab?"Tab":"Page",o=t.active&&t.active.id===r.pageId?t.active:t["get"+i](r.pageId,null,!0);return t.lock("dispatch","Inhalt wird geladen").__dispatching__=!0,o!==t.active&&t["prepare"+i](o),this.dispatch(r,n,o).then(function(){t.unlock("dispatch")["show"+i](o),setTimeout(function(){t.__dispatching__=!1},0)})},getPageId:function(e){return e.module.assemble()}};return e.ns("leila.mvc"),leila.mvc.Dispatcher=e.construct(t,i),leila.mvc.Dispatcher.Resolved=r,leila.mvc.Dispatcher}),define("leila/mvc/location",["../leila","../abstract/observable"],function(e,t){"use strict";var n,r=location,i=history,o={host:"",base:"",stack:null,pos:-1,win:null,doc:null,listeners:{beforechange:!0,change:!0,leave:!0},constructor:function(){var e=arguments;return n||(n=this instanceof o.constructor?this:new o.constructor,t.apply(n,e),n.init.apply(n,e).listen()),n.invoke.apply(n,e)},init:function(e){return e&&e.baseUrl&&this.setBaseUrl(e.baseUrl),this.win=$(window),this.doc=$(document),this.origin=r.protocol+"//"+r.host+(r.port?":"+r.port:""),this.stack=null,this.pos=-1,this},setBaseUrl:function(e){return this.base=(e+"").replace(/^(\w+?:\/\/)([^\\/:]*)(:\\d+)?/,"").replace(/\/$/,""),this},invoke:function(e,t){var n=e;return e&&"object"==typeof e&&(e.url&&(n=e.url),e.replace&&(t=e.replace)),"string"!=typeof n&&"number"!=typeof n||this.releaseChange(n,t),this},start:function(){s.observe.call(this,"on");var e=this.getRelUrl(r.href);return this.stack=[{pos:0,rel:e,url:r.href,title:""}],this.pos=this.stack.length-1,this.listen().trigger("change",{target:window,rel:e,url:r.href}),this},stop:function(){return s.observe.call(this,"off"),this.stack=null,this.pos=1,this},releaseChange:function(t){var n,i=t instanceof $.Event?t:null,o=i&&i.data?i.data:this,s=i?i.originalEvent:null,a=i?i.currentTarget:null,l=i?"":t,c=0,u=-1,p=null,f=!1;if(i&&"click"===i.type?(l=a.getAttribute("href"),n=o.getRelUrl(l),f=!0):i&&"popstate"===i.type?(l=r+"",n=o.getRelUrl(l),p=s&&s.state,u=p?p.pos:e.search(o.stack,"url",l,!0)):l&&(n=this.getRelUrl(l),f=!0),!n)return l&&o.trigger("leave",{target:a,url:l}),!1;-1<u&&(c=u-o.pos,p=p||e.prop(o.stack,u+".params"),o.pos=u);var h={origEvent:i,target:a,rel:n,url:o.getAbsUrl(n),hstep:c,dir:c<0?"back":c>0?"forward":"",params:p};return o.trigger({type:"beforechange",done:function(){f&&o.push(l),o.trigger("change",h)}},h),!1},get:function(e){return this.stack?this.stack[void 0===e?this.pos:e]:null},push:function(e,t,n){var r=this.pos+1,o=this.getRelUrl(e),a=this.getAbsUrl(e),l=s.getItem(r,o,a,t,n);this.stack.splice(r,this.stack.length-r),this.stack.push(l),this.pos=r;try{i.pushState(l,t||"",a)}catch(e){console.error(e+"",e)}return this},replace:function(e,t,n){var r=this.getRelUrl(e),o=this.getAbsUrl(e),a=s.getItem(this.pos,r,o,t,n);this.stack[this.pos]=a;try{i.replaceState(a,t||"",o)}catch(e){console.error(e+"",e)}return this},getRelUrl:function(e){var t;return 0===e.indexOf(this.origin)&&(e=e.substr(this.origin.length)),0===e.indexOf(this.base)&&(t=/^(\/.*|#.*|)$/.exec(e.substr(this.base.length)))&&(e="#"===t[0].charAt(0)?t[0]:t[0].substr(1)),"/"===e.charAt(0)?e:"#"===e.charAt(0)?this.get()?this.get().rel.replace(/#.*$/,"")+e:e:/^\w+:\/\//.test(e)?void 0:e},getAbsUrl:function(e){var t=this.getRelUrl(e);return void 0!==t?this.origin+this.base+t:e}},s={observe:function(e){var t=this,n=t.__releaseChange__,r=t.win,i=t.doc,o="a[href][target!=_blank]";"on"===e?(n=n||(t.__releaseChange__=t.releaseChange.bind(t)),r.on("popstate",n),i.on("click",o,n)):n&&(r.off("popstate",n),i.off("click",o,n))},getItem:function(e,t,n,r,i){return{pos:e,rel:t,url:n,title:r,params:i}},toString:function(){return this.url}};e.ns("leila.mvc");var a=leila.mvc.Location=e.construct(t,o);return Object.defineProperty(leila.mvc.Location,"href",{get:function(){var e=(new a).get();return e&&e.url},set:function(e){(new a).releaseChange(e)}}),a}),define("leila/mvc/spApp",["../leila","../widget/pagePanel","./dispatcher","./location"],function(e,t,n,r){"use strict";var i={pageRoot:"body",constructor:function(e){$.extend(this,e),this.baseUrl=this.baseUrl||$("base").attr("href")||""},run:function(){var e,t=this,n=[];for(var r in this)"init"===r.substr(0,4)&&"function"==typeof this[r]&&n.push(r);for(var i=0,o=n.length;i<o;i++)(e=this[n[i]].apply(this,arguments))&&(n[i]=e);var s=function(){t.getLocation().on({change:function(e,n){t.getDispatcher().dispatchView(n.url,t.getView(),t)},leave:function(e,t){window.open(t.url,"popup")}}).start()};return $.when.apply($,n).then(function(){setTimeout(s)}),this},getDispatcher:function(){return this.dispatcher||(this.dispatcher=new n({requestOptions:{basePath:this.baseUrl,useHash:this.useHash,stdModule:this.stdModule}})),this.dispatcher},getView:function(){return this.view||(this.view=new t({el:this.pageRoot})),this.view},getLocation:function(){return this.location||(this.location=new r({baseUrl:this.baseUrl})),this.location}};return e.ns("leila.mvc"),leila.mvc.SPApp=e.construct(i),leila.mvc.SPApp}),define("leila/mvc/mpApp",["../leila"],function(e){"use strict";var t={rootEl:"body",controllerPath:"controller/",viewPath:"view/",constructor:function(e){$.extend(this,e),!1==this.rootEl instanceof $&&(this.rootEl=$(this.rootEl))},run:function(){var e,t,n,r,i=this,o=[];for(t in this)"init"===t.substr(0,4)&&"function"==typeof this[t]&&o.push(t);for(n=0,r=o.length;n<r;n++)e=this[o[n]].apply(this,arguments),e&&(o[n]=e);return $.when.apply($,o).then(function(){setTimeout(function(){i.dispatch()})}),this},dispatch:function(){function t(e){if("function"==typeof e)return e;if(e&&Object===e.constructor)for(var t in e)if("function"==typeof e[t])return e[t]}var n=this,r=this.rootEl.find("[data-controller], [data-view]");r.each(function(){var r=this,i=/^([^\s]+?)(?:\s+(.+))?$/,o=$.attr(this,"data-controller"),s=$.attr(this,"data-view"),a=o?"controller":"view",l=o?i.exec(o):i.exec(s);if(!l)return!1;var c=l[1],u=l[2]?e.isJSON(l[2])?$.parseJSON(l[2]):e.parseOptions(l[2]):null;require([n[a+"Path"]+c],function(e){var i=t(e),o="controller"===a?new i(r,u,n):new i($.extend({},u,{el:r,app:n})),s=n.getId(c,a,r,u);n[a][s]=o,"function"==typeof o.run&&(o.app=n,o.run(r,u,n))})})},getId:function(e,t){for(var n=e.replace("/","_"),r=n,i=1;(this[t]||(this[t]={}))[r]&&100>i;i++)r=n+"_"+i;return r}};return e.ns("leila.mvc"),leila.mvc.MPApp=e.construct(t),leila.mvc.MPApp});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("tslib/utils/leila",["require","exports","leila/leila","leila/model","leila/view","leila/mvc/spApp","leila/mvc/mpApp"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("leila/leila"),r=e("leila/view"),i=e("leila/model"),o=e("leila/mvc/spApp"),s=e("leila/mvc/mpApp");t.ll=n,t.leila=n;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(r);t.View=a;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i);t.Model=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o);t.SpApp=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s);t.MpApp=u;var p=function(){function e(){this.app=null}return e}();t.Controller=p}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("tslib/utils/decorator",["require","exports"],e)}(function(e,t){"use strict";function n(e){return function(t,n){t[n]=e}}function r(e){return function(t){for(var n in e)t.prototype[n]=e[n];return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.protoProp=n,t.Component=r});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("view/newsletter",["require","exports","bootstrap/popover","bootstrap/collapse","tslib/utils/leila","tslib/utils/decorator"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("tslib/utils/leila"),r=e("tslib/utils/decorator"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.type="default",n.popoverText={email:"Bitte tragen Sie erst Ihre E-Mail-Adresse ein.",success:"",ajaxError:"Es ist ein Fehler aufgetreten, versuchen sie es später noch einmal."},n.popoverCount=!0,n.popoverText=$.extend(n.popoverText,t.popoverText),n.el.info.popover({placement:"bottom",trigger:"click focus"}),n.el.mail.popover({placement:"top",trigger:"click focus",html:!0,content:function(){return n.popoverText[n.type]||null}}),n.el.mail.on("click",function(e){$(e.currentTarget.dataset.target).collapse("show"),n.scrollIntoViewport(e)}),n.el.close.on("click",function(e){$(e.currentTarget).parents(".collapse").collapse("hide")}),n.el.mail.on("show.bs.popover",function(e){n.setPopoverClass(e)}),n.el.mail.one("shown.bs.popover",function(e){n.setPopoverClass(e),n.el.mail.siblings(".collapse.in").collapse("hide")}),n}return __extends(t,e),t.prototype.scrollIntoViewport=function(e){var t=200,n=$(e.currentTarget).offset().top-140;
$("html, body").animate({scrollTop:n},t)},t.prototype.sendNewsletter=function(){var e=this,t=this.el.mail.val();$('[data-role="loaderIcon"]').show(),t.length>0?$.get("/php/leaseb2c/json/newslettersubscribe",{email:t}).always(function(t,n){"success"===n?(e.type="success",e.popoverText.success=t.data?t.data.html:"",e.showPopover(),e.el.mail.val("")):(e.type="ajaxError",e.showPopover()),$('[data-role="loaderIcon"]').hide()}):(this.type="email",this.showPopover())},t.prototype.showPopover=function(){var e=this;this.el.mail.popover("show").focus(),setTimeout(function(){e.type=null},200)},t.prototype.setPopoverClass=function(e){var t=ll.jq(e.currentTarget),n=t.data();if(n["bs.popover"]&&n["bs.popover"].$tip){var r=n["bs.popover"].$tip;r.removeClass("text-danger"),r.addClass("success"===this.type?"":"text-danger")}},t}(n.View);i=__decorate([r.Component({sel:{btn:"button",mail:'input[type="email"]',info:'[data-toggle="popover"]',close:".collapse .close"},events:{"submit | form":function(e){return this.sendNewsletter(),!1}}}),__metadata("design:paramtypes",[Object])],i),t.Newsletter=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("view/wishlist",["require","exports","tslib/utils/leila","tslib/utils/decorator"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("tslib/utils/leila"),r=e("tslib/utils/decorator"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.cookieName="wishlist",n.showCountParkinglots(),n}return __extends(t,e),t.prototype.showCountParkinglots=function(){if(this.app.cookieManager){var e=$.parseJSON(this.app.cookieManager.getCookie(this.cookieName)),t=0;if(e&&e.vehicles)for(var n in e.vehicles)e.vehicles.hasOwnProperty(n)&&t++;this.el.counter.text(t)}},t}(n.View);i=__decorate([r.Component({sel:{counter:".wishlist-counter"}}),__metadata("design:paramtypes",[Object])],i),t.Wishlist=i}),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments.length;for(n=0;n<r;n++)e=arguments[n],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",r=e.Element[n],i=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],r=0,i=n.length;r<i;r++)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},u=c[n]=[],p=function(){return new c(this)};if(a[n]=Error[n],u.item=function(e){return this[e]||null},u.contains=function(e){return e+="",l(this,e)!==-1},u.add=function(){var e,t=arguments,n=0,r=t.length,i=!1;do e=t[n]+"",l(this,e)===-1&&(this.push(e),i=!0);while(++n<r);i&&this._updateClassName()},u.remove=function(){var e,t,n=arguments,r=0,i=n.length,o=!1;do for(e=n[r]+"",t=l(this,e);t!==-1;)this.splice(t,1),o=!0,t=l(this,e);while(++r<i);o&&this._updateClassName()},u.toggle=function(e,t){e+="";var n=this.contains(e),r=n?t!==!0&&"remove":t!==!1&&"add";return r&&this[r](e),t===!0||t===!1?t:!n},u.toString=function(){return this.join(" ")},i.defineProperty){var f={get:p,enumerable:!0,configurable:!0};try{i.defineProperty(r,t,f)}catch(e){e.number===-2146823252&&(f.enumerable=!1,i.defineProperty(r,t,f))}}else i[n].__defineGetter__&&r.__defineGetter__(t,p)}}(self)),define("modulelib/js/classList.min",function(){}),define("text",["module"],function(e){"use strict";var t,n,r,i,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),u=l&&location.hostname,p=l&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.7",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(e){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,r=n||t,o=r.indexOf("!"),o!==-1&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,s,a,l=t.xdRegExp.exec(e);return!l||(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==r.toLowerCase()||(a||s)&&a!==i))},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(f[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return void r();h.isBuild=i.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),f=h.useXhr||t.useXhr;!l||f(a,c,u,p)?t.get(a,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)})},write:function(e,n,r,i){if(f.hasOwnProperty(n)){var o=t.jsEscape(f[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,i,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=r.toUrl(s.moduleName+a)+".js";t.load(l,r,function(n){var r=function(e){return i(c,e)};r.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,l,r,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),t(i)}catch(e){r(e)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,s=t.createXhr();if(s.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(t){var i,o;4===s.readyState&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),l="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,o,s={},a=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(a,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),s),o.close(),n.close(),t(s.value)}catch(e){throw new Error((a&&a.path||"")+": "+e)}}),t}),define("text!tslib/component/infoPopover/priceInfo.tpl",[],function(){return"<%\n    // CONTENT OF DETAIL LAYER\n    // USED HERE: sixt-neuwagen.de (neue Startseite)\n\n    // detect project\n    var projectName = 'newcar';\n    if (typeof redesign !== 'undefined') {\n        projectName = 'redesign';\n    } else if (typeof newCar !== 'undefined') {\n        projectName = 'newCar';\n    } else if (typeof autohausweb !== 'undefined') {\n        projectName = 'autohausweb';\n    }\n    var checkFeatureEPWL = window[projectName].app.checkFeatureEPWL();\n\n    var suffix       = (car.lvkd === 'P') ? '_brutto' : '',\n        lvkd         = car.lvkd,\n        monthRate    = car['monthly_rate' + suffix],\n        noPriceText  = car.noPriceText ? car.noPriceText : '',\n        defaultText  = 'auf Anfrage',\n        showValue    = monthRate > 0 ? true : false,\n        // epwl         = typeof car.fEPWL !== 'undefined' ? car.fEPWL : (typeof car.enable_prices_wo_logistic !== 'undefined' ? car.enable_prices_wo_logistic : true),\n        epwl = checkFeatureEPWL,\n        // logisticsIncluded = lvkd === 'P' || (lvkd === 'G' && (epwl === false || epwl === 'false')),\n        logisticsIncluded = !checkFeatureEPWL;\n\n    var logisticsTotalOnce, pickupType, pickupPackage;\n\n    if (car.prices && car.prices.service_rate && showValue) {\n        monthRate += car.prices['service_rate' + suffix];\n    }\n\n    // MAPPING\n\n    // logistic costs for single payment (once)\n    if (!logisticsIncluded) {\n        if (car.deliveryOnce) {\n            logisticsTotalOnce = this.priceRender(car.deliveryOnce, noPriceText);\n        } else if (car.total_value_once) {\n            logisticsTotalOnce = this.priceRender(car['total_value_once' + suffix], noPriceText);\n        } else if (car.best_logistic_total) {\n            logisticsTotalOnce = this.priceRender(car.best_logistic_total, noPriceText);\n        } else {\n            logisticsTotalOnce = noPriceText;\n        }\n    }\n\n    // pickup type\n    if (car.delivTitle) {\n        pickupType = car.delivTitle;\n    } else if (car.pickup_name) {\n        pickupType = car.pickup_name === 'Händler' ? 'Abholung beim Händler' : car.pickup_name;\n    } else if (car.best_logistic_type) {\n        pickupType = car.best_logistic_type == '6' ? 'Haustürlieferung' : car.best_logistic_type == '0' ? 'Werksauslieferung' : 'Abholung beim Händler';\n    } else {\n        pickupType = noPriceText;\n    }\n\n    // pickup package\n    if (car.pickup_package_name) {\n        pickupPackage = car.pickup_package_name;\n    } else if (car.best_logistic_package && car.best_logistic_package.length) {\n        pickupPackage = car.best_logistic_package;\n    } else {\n        pickupPackage = '';\n    }\n%>\n\n<div class=\"price-info-content\">\n    <hr>\n<!-- leasingcore/ts/component/infoPopover/priceInfo.tpl -->\n    <!-- HEADER -->\n    <table cellpadding=\"0\" cellspacing=\"0\">\n        <tr>\n            <td>Finanzierungsinstitut</td>\n            <td>Sixt Leasing SE<br>\n                Zugspitzstraße 1<br>\n                82049 Pullach</td>\n        </tr>\n        <tr>\n            <td>Vertragsart <% if (Number(car.product_id) === 1) { // Leasing %> <br> <% } %></td>\n            <td>Kilometerleasingvertrag <% if (Number(car.product_id) === 1) { // Leasing %>mit Kaufoption<% } %></td>\n        </tr>\n    </table>\n\n    <hr>\n\n    <strong>Finanzierungsbeispiel</strong>\n    <div>(alle Preisangaben <%= lvkd === 'P' ? 'inkl.' : 'ohne' %> MwSt.)</div>\n    <br>\n\n    <table cellpadding=\"0\" cellspacing=\"0\">\n        <tbody>\n\n            <!-- VERTRAGSLAUFZEIT -->\n            <tr>\n                <td>Vertragslaufzeit</td>\n                <td><%= car.term || car.terms || 0 %> Monate</td>\n            </tr>\n\n            <!-- MONATSRATE -->\n            <tr>\n                <td><%= car.term || car.terms || 0 %> Monatsraten\n                    <% if (logisticsIncluded) { %>\n                    <sup>1</sup>\n                    <% } %> à\n                </td>\n              <td><%= showValue ? this.priceRender(monthRate, noPriceText) : noPriceText %></td>\n            </tr>\n\n            <!-- EINMALIGE SONDERZAHLUNG -->\n            <tr>\n                <td width=\"155\">Einmalige Sonderzahlung</td>\n                <td width=\"85\">\n                    <%= showValue ? this.priceRender(Number(car['specialpayment_value' + suffix]), noPriceText, true) : noPriceText %>\n                </td>\n            </tr>\n\n            <!-- ÜBERFÜHRUNGSKOSTEN (einmalig) -->\n            <% if (!logisticsIncluded && logisticsTotalOnce) { %>\n                <tr>\n                    <td>Überführungskosten (einmalig)<sup class=\"sup\">1</sup></td>\n                    <td>\n                        <%= logisticsTotalOnce %>\n                    </td>\n                </tr>\n            <% } %>\n\n            <!-- SCHLUSSZAHLUNG (leasing only) -->\n            <% if (Number(car.product_id) === 1) { %>\n                <tr>\n                  <td>Schlusszahlung</td>\n                  <td>\n                      <%= showValue ? this.priceRender(car['final_payment' + suffix], noPriceText) : noPriceText %>\n                  </td>\n                </tr>\n                <tr>\n                    <td>Preis bei Ausübung der Kaufoption</td>\n                    <td>\n                        <%= showValue ? this.priceRender(car['purchaseoption' + suffix], noPriceText) : noPriceText %>\n                    </td>\n                </tr>\n            <% } %>\n            <tr><td></td><td><hr></td></tr>\n\n            <!-- GESAMTBETRAG -->\n            <tr>\n                <td>Gesamtbetrag</td>\n                <td>\n                    <%= showValue ? this.priceRender(car['total' + suffix], noPriceText) : noPriceText %>\n                </td>\n            </tr>\n            <tr>\n                <td colspan=\"2\">&nbsp;</td>\n            </tr>\n\n            <!-- GESAMTBETRAG OHNE AUSÜBUNG DER KAUFOPTION (leasing only) -->\n            <% if (Number(car.product_id) === 1) { %>\n                <tr>\n                    <td>Gesamtbetrag ohne Ausübung der Kaufoption</td>\n                    <td>\n                        <%= showValue ? this.priceRender(car['total_wo_purchase' + suffix], noPriceText) : noPriceText %>\n                    </td>\n                </tr>\n                <tr>\n                    <td colspan=\"2\">&nbsp;</td>\n                </tr>\n            <% } %>\n\n            <!-- ZINSEN -->\n            <tr>\n                <td>Sollzinssatz pro Jahr<sup class=\"sup\">2</sup></td>\n                <td>\n                    <%= showValue ? this.priceRender(car.debit_interest || 0, noPriceText, true, '%', true) : noPriceText %>\n                </td>\n            </tr>\n            <tr>\n                <td>Effektiver Jahreszins</td>\n                <td>\n                    <%= showValue ? this.priceRender(car.effective_interest || 0, noPriceText, true, '%', true) : noPriceText %>\n                </td>\n            </tr>\n            <tr>\n                <td>Nettodarlehensbetrag (Anschaffungspreis)<sup class=\"sup\">3</sup></td>\n                <td><%= showValue ? this.priceRender(car['loan_total' + suffix], noPriceText) : noPriceText %></td>\n            </tr>\n\n            <tr>\n                <td>Listenpreis<sup class=\"sup\">4</sup></td>\n                <td><%= showValue ? this.priceRender(car['lipr' + suffix], noPriceText) : noPriceText %></td>\n            </tr>\n        </tbody>\n    </table>\n\n    <!-- LEGENDE -->\n    <ul class=\"small\">\n        <li><sup>1</sup>\n            <% if (logisticsIncluded) { %>\n                <span>Inkl.</span>\n            <% } %>\n\n            Überführungskosten <%= pickupType %>\n\n            <%= pickupPackage ? ': ' + pickupPackage : '' %>\n        </li>\n        <li><sup>2</sup>\n            Gebunden für die gesamte Vertragslaufzeit</li>\n        <li><sup>3</sup>\n            Der Anschaffungspreis bezeichnet den Preis, den die Sixt Leasing SE für das Kfz zu bezahlen hat.</li>\n        <li><sup>4</sup>\n            Unverbindliche Preisempfehlung des Herstellers. Änderungen und Irrtümer vorbehalten.\n            Farbe und Ausstattung können vom Angebot abweichen. Kostenpflichtige Sonderausstattung möglich.</li>\n    </ul>\n</div>\n"}),define("text!tslib/component/infoPopover/eekInfo.tpl",[],function(){return'<div class="eek-info-content">\r\n  <table>\r\n    <colgroup>\r\n      <col width="73%">\r\n    </colgroup>\r\n    <% Object.keys(efficiency.consumption).forEach(function(key) { %>\r\n      <tr>\r\n        <td><%= efficiency.consumption[key].context %> <small><%= efficiencyText.COMBITEXT %></small>:</td>\r\n        <td><%= efficiency.consumption[key].value %> <%= efficiency.consumption[key].unit %></td>\r\n      </tr>\r\n    <% }) %>\r\n    <tr>\r\n      <td><%= efficiency.co2.context %></td>\r\n      <td><%= efficiency.co2.value %> <%= efficiency.co2.unit %></td>\r\n    </tr>\r\n  </table>\r\n\r\n  <ul class="efficiencyBlock mbm">\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'+\' ? \'\' : \'hidden\'%>" data-eek="X">A+</span>\r\n      <span class="efficiency" data-eek="+">A+</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'A\' ? \'\' : \'hidden\'%>" data-eek="X">A</span>\r\n      <span class="efficiency" data-eek="A">A</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'B\' ? \'\' : \'hidden\'%>" data-eek="X">B</span>\r\n      <span class="efficiency" data-eek="B">B</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'C\' ? \'\' : \'hidden\'%>" data-eek="X">C</span>\r\n      <span class="efficiency" data-eek="C">C</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'D\' ? \'\' : \'hidden\'%>" data-eek="X">D</span>\r\n      <span class="efficiency" data-eek="D">D</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'E\' ? \'\' : \'hidden\'%>" data-eek="X">E</span>\r\n      <span class="efficiency" data-eek="E">E</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'F\' ? \'\' : \'hidden\'%>" data-eek="X">F</span>\r\n      <span class="efficiency" data-eek="F">F</span>\r\n    </li>\r\n    <li>\r\n      <span class="efficiency <%= efficiency.eek.icon === \'G\' ? \'\' : \'hidden\'%>" data-eek="X">G</span>\r\n      <span class="efficiency" data-eek="G">G</span>\r\n    </li>\r\n  </ul>\r\n\r\n  <small>\r\n    Auf der Grundlage der gemessenen CO<sub>2</sub>-Emissionen unter Berücksichtigung der Masse des Fahrzeugs ermittelt.\r\n  </small>\r\n\r\n</div>'}),define("normalize",["require","module"],function(e,t){function n(e,t,n){if(0===e.indexOf("data:"))return e;if(e=a(e),e.match(/^\//)||e.match(l))return e;var i=n.match(l),s=t.match(l);return!s||i&&i[1]==s[1]&&i[2]==s[2]?o(r(e,t),n):r(e,t)}function r(e,t){"./"==e.substr(0,2)&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");for(n.pop();curPart=r.shift();)".."==curPart?n.pop():n.push(curPart);return n.join("/")}function o(e,t){var n=t.split("/");for(n.pop(),t=n.join("/")+"/",i=0;t.substr(i,1)==e.substr(i,1);)i++;for(;"/"!=t.substr(i,1);)i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");for(out="";n.shift();)out+="../";for(;curPart=r.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var s=/([^:])\/+/g,a=function(e){return e.replace(s,"$1/")},l=/[^\:\/]*:\/\/([^\/])*/,c=function(e,t,r,i){t=a(t),r=a(r);for(var o,s,e,l=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;o=l.exec(e);){s=o[3]||o[2]||o[5]||o[6]||o[4];var c;c=i&&"/"==s.substr(0,1)?i+s:n(s,t,r);var u=o[5]||o[6]?1:0;e=e.substr(0,l.lastIndex-s.length-u-1)+c+e.substr(l.lastIndex-u-1),l.lastIndex=l.lastIndex+(c.length-s.length)}return e};return c.convertURIBase=n,c}),define("css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,n=!1,r=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]||t[8]?r=!1:t[4]&&(n=parseInt(t[4])<18);var i={};i.pluginBuilder="./css-builder";var o,s,a,l=function(){o=document.createElement("style"),e.appendChild(o),s=o.styleSheet||o.sheet},c=0,u=[],p=function(e){s.addImport(e),o.onload=function(){f()},c++,31==c&&(l(),c=0)},f=function(){a();var e=u.shift();return e?(a=e[1],void p(e[0])):void(a=null)},h=function(e,t){if(s&&s.addImport||l(),s&&s.addImport)a?u.push([e,t]):(p(e),a=t);else{o.textContent='@import "'+e+'";';var n=setInterval(function(){try{o.sheet.cssRules,clearInterval(n),t()}catch(e){}},10)}},d=function(t,n){var i=document.createElement("link");if(i.type="text/css",i.rel="stylesheet",r)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var o=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==i.href)return clearInterval(o),n()}},10);i.href=t,e.appendChild(i)};return i.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},i.load=function(e,t,r,i){(n?h:d)(t.toUrl(e+".css"),r)},i});var efficiency;!function(e){e.text={ECETEXT:"Kraftstoffverbrauch",ECEUNIT:"l/100 km",GASUNIT:"kg/100 km",KWHTEXT:"Stromverbrauch",KWHUNIT:"kWh/100 km",CO2TEXT:"CO<sub>2</sub>-Emissionen",CO2UNIT:"g/km",EFFTEXT:"CO<sub>2</sub>-Effizienz",COMBITEXT:"kombiniert",COMBISHORT:"(kombi.)",EMPTYCTX:"k.A."};var t=["E","P"],n={kwh:{value:"kwhk",inTown:"kwhs",extraUrban:"kwhu"},ece:{value:"ecet",inTown:"ece1",extraUrban:"ece2"},sce:{value:"scet",inTown:"sce1",extraUrban:"sce2"}},r={eekPlus:"+",consumptionObject:!1,valueOnNextLine:!1},i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])}return n};e.model={getData:function(t,n){void 0===t&&(t=null),void 0===n&&(n={});var o=i(r,n);return t?{consumption:e.model.getConsumptionData(t,o),co2:e.model.getEmissionenData(t,o),eek:e.model.getEffizienzData(t,o)}:null},getConsumptionData:function(t,n){var r=n.consumptionObject?{}:[];if(e.model.isElectricVehicle(t)){var i=e.model.getDisplayValues(t,"kwh",n);n.consumptionObject?r.kwhk=i:r.push(i)}if("E"!==t.ptty){var o="E"===t.strs&&e.model.isElectricVehicle(t),s=e.model.getDisplayValues(t,o?"sce":"ece",n);n.consumptionObject?r.ecet=s:r.push(s)}return r},getEmissionenData:function(t,n){var r={context:e.text.CO2TEXT,unit:e.text.CO2UNIT,value:e.model.isUtilityVehicle(t)?e.text.EMPTYCTX:"E"===t.ptty?0:this.numberFormat(t.co2,0),string:""};return r.string=this.buildString(r,n.valueOnNextLine),r},getEffizienzData:function(t,n){return{context:e.text.EFFTEXT,value:e.model.isUtilityVehicle(t)?e.text.EMPTYCTX:"+"===t.eek?"A+":t.eek,icon:e.model.isUtilityVehicle(t)?"X":"+"===t.eek?n.eekPlus:t.eek?t.eek.toUpperCase():t.eek,string:e.text.EFFTEXT}},getDisplayValues:function(t,r,i){var o="sce"===r?"ece":r,s={context:e.text[o.toUpperCase()+"TEXT"],unit:e.text[o.toUpperCase()+"UNIT"],string:"",type:o},a=n[r];return Object.keys(a).forEach(function(n){var r=a[n];s[n]=!e.model.isUtilityVehicle(t)&&t[r]?e.model.numberFormat(t[r]):e.text.EMPTYCTX}),"G"===t.moto&&(s.unit=e.text.GASUNIT),s.string=e.model.buildString(s,i.valueOnNextLine),s},isElectricVehicle:function(e){return e.ptty&&t.indexOf(e.ptty)>-1},isUtilityVehicle:function(e){return e.jtyc&&"V"===e.jtyc.toUpperCase()},numberFormat:function(t,n,r){return void 0===n&&(n=1),void 0===r&&(r=e.text.EMPTYCTX),null==t||""===t||" "===t?r:leila.util.string.numFormat(t,n,",",".")},buildString:function(t,n){return void 0===n&&(n=!1),t.context+" "+e.text.COMBITEXT+":"+(n?"<br />":" ")+t.value+" "+t.unit}}}(efficiency||(efficiency={})),define("tslib/utils/efficiencyModel",function(){}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("tslib/component/infoPopover/infoPopover",["require","exports","bootstrap/popover","text!./priceInfo.tpl","text!./eekInfo.tpl","css!./infoPopover.css","./../../utils/efficiencyModel"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e("./../../utils/efficiencyModel");var n=function(){function t(t){this.clickTarget="[data-infopopover]",this.tpl={priceInfo:e("text!./priceInfo.tpl"),eekInfo:e("text!./eekInfo.tpl")},this.pageGlobals={},this.el=t.el||null,this.pageGlobals=t.globals||{},this.tpl=$.extend({},this.tpl,t.tpl),this.initPopover()}return t.prototype.initPopover=function(){var e=this;e.el.popover({selector:e.clickTarget,html:!0,trigger:"click focus",container:e.el,placement:"bottom auto",content:"loading ..."}),e.el.on("click",e.clickTarget,function(e){e.preventDefault()}).on("show.bs.popover",function(t){var n=$(t.target);if(n.is("[data-infopopover]")){var r=n.data(),i=r["bs.popover"],o=JSON.parse(n.attr("data-cardata")),s=r.infopopover,a=e.pageGlobals;o=$.extend({},a,o),i.$tip.addClass("info-popover "+s),r.placement&&(i.options.placement=r.placement),(r.container||r.container===!1)&&(i.options.container=r.container),r.popoverClass&&i.$tip.addClass("popover-"+r.popoverClass),r.infopopoverMode&&(o.product_id="V"===r.infopopoverMode?1:2),e.tpl[s]&&(i.options.content=ll.template(e.tpl[s]).call(e,{car:o,efficiency:efficiency.model.getData(o),efficiencyText:efficiency.text}))}})},t.prototype.priceRender=function(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=this.pageGlobals.unit),"string"==typeof e&&"€"===e.slice(-1)?e:(e=isNaN(e)?parseFloat(e):e,e>0||n&&e>-1?ll.numFormat(e,2,",",".")+" "+r:t)},t}();t.InfoPopover=n}),function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("app/util/cookieManager",["require","exports"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getCookie=function(e){var t=document.cookie,n=t.indexOf(e+"=");if(n===-1)t=null;else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);r===-1&&(r=t.length),t=decodeURIComponent(t.substring(n,r))}return t},e.prototype.setCookie=function(e,t,n){var r=new Date,i="",o=/^(\w|-)*/,s="; domain="+window.location.host.replace(o,"");return!(!e||!t)&&(r.setDate(r.getDate()+n),i=encodeURIComponent(t)+(null==n?"":"; expires="+r.toUTCString()),document.cookie=e+"="+i+s+"; path=/",e+"="+i+s+"; path=/")},e.prototype.eraseCookie=function(e){return this.setCookie(e,"erase",-1)},e}();t.CookieManager=n});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__decorate=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("app/view/navigation",["require","exports","tslib/utils/leila","tslib/utils/decorator"],e)}(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("tslib/utils/leila"),r=e("tslib/utils/decorator"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleClass="open-navigation-menu","undefined"!=typeof n.app&&"undefined"!=typeof n.app.cookieManager&&n.app.cookieManager.setCookie("LVKD",t.app.config.lvkd),n}return __extends(t,e),t.prototype.setCookie=function(e){var t=e.currentTarget,n=t.dataset.switchlvkdto;"undefined"!=typeof this.app&&"undefined"!=typeof this.app.cookieManager&&this.app.cookieManager.setCookie("LVKD",n)},t.prototype.gtmPushData=function(e){var t,n=e.currentTarget,r=n.dataset.switchlvkdto;t="G"===r.toUpperCase()?"business":"private";var i={event:"event",eventCategory:"Customer-Category",eventAction:t,eventLabel:void 0};return window.dataLayer.push(i),!0},t}(n.View);i=__decorate([r.Component({sel:{btn:'[data-selector="menu"]',navLink:'.main-entry a:has("~ ul"):not("a[href]")'},el:{body:document.body},events:{"click | {{btn}}":function(){this.el.body.classList.toggle(this.toggleClass)},"click | {{navLink}}":function(e){e.preventDefault(),e.currentTarget.classList.toggle("active")},"click | .lvkd-switch a":function(e){this.setCookie(e),this.gtmPushData(e)}}}),__metadata("design:paramtypes",[Object])],i),t.Navigation=i});var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define("app/appHeaderFooter",["require","exports","modulelib/js/classList.min","tslib/utils/leila","tslib/component/infoPopover/infoPopover","./util/cookieManager","./view/navigation"],e)}(function(e,t){"use strict";var n=e("tslib/utils/leila"),r=e("tslib/component/infoPopover/infoPopover"),i=e("./util/cookieManager"),o=e("./view/navigation"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootEl=$("body .split-redesign footer, body .split-redesign header"),t}return __extends(t,e),t.prototype.initGlobals=function(){this.config={unit:"€"},this.config=$.extend(this.config,$("#sxGlobals").data("globals")),this.config.suffix="G"===(""+this.config.lvkd).toUpperCase()?"":"_brutto",this.config.mode?this.config.product_id="L"===this.config.mode?"2":"1":this.config.mode=t.defaults.mode},t.prototype.initPopover=function(){
$('.page-footer [data-toggle="popover"], .split-redesign .page-head [data-toggle="popover"]').popover({delay:{hide:250}}),this.infoPopover=new r.InfoPopover({el:$("header.page-head"),globals:this.config})},t.prototype.initCookieMangaer=function(){this.cookieManager=new i.CookieManager},t.prototype.initNavigation=function(){this.navigation=new o.Navigation({el:document.querySelector(".page-head")})},t.prototype.checkFeatureEPWL=function(){var e=!1,t="undefined"!=typeof this.config.lvkd?this.config.lvkd:"P";return("G"===t&&this.config.enable_prices_wo_logistic||"P"===t&&this.config.enable_prices_wo_logistic_p)&&(e=!0),e},t}(n.MpApp);return s.defaults={mode:"V"},s}),function(e){"use strict";require.config({baseUrl:"/static/leaseb2c/AppRedesign/js",waitSeconds:20,paths:{leila:"../../js/lib/leila",bootstrap:"../lib/bootstrap/js",controller:"app/controller",model:"app/model",component:"app/component",view:"app/view",tpl:"app/tpl",config:"app/config",util:"app/util",modulelib:"../lib",tslib:"../../tslib",core:"../../js/lib",text:"../../js/lib/require/text",css:"../../js/lib/require/css",multimodules:"../../Multimodules/js"},shim:{"bootstrap/popover":{deps:["bootstrap/tooltip"]}}}),require(["app/appHeaderFooter"],function(t){e.redesign=e.redesign||{},e.redesign.app=(new t).run()})}(this),define("mainHeaderFooter",function(){});